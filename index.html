<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sz57</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .tekst {
            white-space: pre-line;
            font-size: 18px;
        }
        body {
            background-color: #f0f2f5;
        }
        .header {
            text-align: center;
            padding: 3rem 1rem;
            background: linear-gradient(135deg, #4a90e2, #34495e);
            color: white;
            position: relative;
            overflow: hidden;
        }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: titleSlide 1s ease-out;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        @keyframes titleSlide {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .header::after {
            content: '';
            position: absolute;
            bottom: -50px;
            left: -50px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(45deg);
            animation: shine 4s infinite;
        }
        @keyframes shine {
            0% { left: -50px; }
            100% { left: 110%; }
        }
        .search-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        .search-container a {
            color: white;
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            white-space: nowrap;
        }
        .search-container a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        nav {
            background: linear-gradient(135deg, #4a90e2, #34495e);
            padding: 1rem;
            position: sticky;
            top: 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        .menu {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .menu a {
            color: white;
            text-decoration: none;
            padding: 0.8rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            white-space: nowrap;
            flex: 1 1 20%;
            text-align: center;
            justify-content: center;
        }
        .menu a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        .menu a.active {
            background-color: #e74c3c;
        }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .announcement-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.5s ease;
            position: relative;
        }
        .announcement-card h2 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        .announcement-card .time {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 1rem;
            display: block;
        }
        .announcement-card .actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
        }
        .announcement-card .actions span {
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }
        .announcement-card .actions span:hover {
            transform: scale(1.1);
        }
        .announcement-card .actions .delete {
            color: #e74c3c;
        }
        .announcement-card .actions .edit {
            color: #3498db;
        }
        .announcement-card .actions .move {
            color: #2ecc71;
        }
        .homepage-content {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            line-height: 1.8;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .su-info {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            font-size: 0.95rem;
            color: #34495e;
        }
        .su-info h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        .teachers-table, .tutors-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .teachers-table th, .teachers-table td,
        .tutors-table th, .tutors-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #f0f2f5;
        }
        .teachers-table th, .tutors-table th {
            background-color: #4a90e2;
            color: white;
        }
        .teachers-table tr:hover, .tutors-table tr:hover {
            background-color: #f9f9f9;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .add-button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        .add-button:hover {
            background: #219a52;
            transform: scale(1.05);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
            white-space: pre-wrap;
        }
        .date-range-container {
            display: flex;
            gap: 1rem;
        }
        .date-range-item {
            flex: 1;
        }
        .form-buttons {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        .form-buttons button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .form-buttons button[type="submit"] {
            background: #27ae60;
            color: white;
        }
        .form-buttons button[type="button"] {
            background: #e74c3c;
            color: white;
        }
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 2rem 0;
        }
        .page-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #4a90e2;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .page-btn.active {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }
        .page-btn:hover:not(.active) {
            background: #f0f2f5;
        }
        .announcement-content {
            white-space: pre-line;
            line-height: 1.6;
            margin: 1rem 0;
        }
        /* Archiwum modal */
        .archive-modal {
            max-height: 80vh;
            overflow-y: auto;
        }
        .archive-item {
            background: #f9f9f9;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 5px;
            border-left: 4px solid #4a90e2;
        }
        .archive-item h3 {
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }
        .archive-item p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .archive-item .actions {
            margin-top: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }
        .archive-item .actions button {
            padding: 0.3rem 0.6rem;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .archive-item .actions .restore {
            background: #2ecc71;
            color: white;
        }
        .archive-item .actions .delete-permanent {
            background: #e74c3c;
            color: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Szko≈Ça Podstawowa nr 57 we Wroc≈Çawiu</h1>
        <div class="search-container">
            <a href="#" id="archiveButton">Archiwum</a>
        </div>
    </div>

    <nav>
        <div class="menu">
            <a href="#" class="active" data-category="1">Strona G≈Ç√≥wna</a>
            <a href="#" data-category="5">Aktualno≈õci</a>
            <a href="#" data-category="11">Wa≈ºne Informacje</a>
            <a href="#" data-category="2">Wydarzenia</a>
            <a href="#" data-category="9">Grono Pedagogiczne</a>
            <a href="#" data-category="10">Wychowawcy</a>
            <a href="#" data-category="7">Klasy 1-3 i ≈öwietlica</a>
            <a href="#" data-category="6">SamorzƒÖd Uczniowski i Wolontariat</a>
            <a href="#" data-category="8">Dla Nauczycieli</a>
            <a href="#" data-category="3">Og≈Çoszenia</a>
            <a href="#" data-category="4">Nieobecno≈õci</a>
        </div>
    </nav>

    <div class="container">
        <button class="add-button" id="addButton" onclick="handleAddButton()">Dodaj Og≈Çoszenie</button>
        <div id="announcements"></div>
    </div>

    <!-- Modal dla nieobecno≈õci -->
    <div class="modal-overlay" id="absenceModal">
        <div class="modal-content">
            <form id="absenceForm">
                <div class="form-group">
                    <label>Okres nieobecno≈õci:</label>
                    <div class="date-range-container">
                        <div class="date-range-item">
                            <label for="absenceDateFrom">Od:</label>
                            <input type="date" id="absenceDateFrom" required>
                        </div>
                        <div class="date-range-item">
                            <label for="absenceDateTo">Do:</label>
                            <input type="date" id="absenceDateTo" required>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="absenceHours">Godziny (lub "ca≈Çy dzie≈Ñ"):</label>
                    <input type="text" id="absenceHours" placeholder="np. 8:00-12:00 lub ca≈Çy dzie≈Ñ" required>
                </div>

                <div class="form-group">
                    <label for="absenceTeacher">Nauczyciel:</label>
                    <select id="absenceTeacher" required>
                        <option value="">Wybierz nauczyciela</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="absenceReason">Pow√≥d:</label>
                    <select id="absenceReason" required>
                        <option value="">brak</option>
                        <option value="Choroba">Choroba</option>
                        <option value="Zwolnienie Lekarskie">Zwolnienie Lekarskie</option>
                        <option value="Szkolenie">Szkolenie</option>
                        <option value="D≈Çugotrwa≈Ça Choroba">D≈Çugotrwa≈Ça Choroba</option>
                        <option value="Rada/Konsultacje">Rada/Konsultacje</option>
                        <option value="Sprawy szkolne">Sprawy szkolne</option>
                        <option value="Sprawy prywatne">Sprawy prywatne</option>
                        <option value="Urlop P≈Çatny">Urlop P≈Çatny</option>
                        <option value="Urlop Bezp≈Çatny">Urlop Bezp≈Çatny</option>
                        <option value="Wycieczka">Wycieczka</option>
                    </select>
                </div>

                <div class="form-buttons">
                    <button type="button" onclick="document.getElementById('absenceModal').style.display = 'none'">Anuluj</button>
                    <button type="submit">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dla wydarze≈Ñ -->
    <div class="modal-overlay" id="eventModal">
        <div class="modal-content">
            <form id="eventForm">
                <div class="form-group">
                    <label for="eventDate">Data:</label>
                    <input type="date" id="eventDate" required>
                </div>
                
                <div class="form-group">
                    <label for="eventHours">Godziny (lub "ca≈Çy dzie≈Ñ"):</label>
                    <input type="text" id="eventHours" placeholder="np. 8:00-12:00 lub ca≈Çy dzie≈Ñ" required>
                </div>

                <div class="form-group">
                    <label for="eventName">Nazwa wydarzenia:</label>
                    <input type="text" id="eventName" required>
                </div>

                <div class="form-group">
                    <label for="eventCategory">Dzia≈Çanie:</label>
                    <select id="eventCategory" required>
                        <option value="">brak</option>
                        <option value="zajƒôcia odwo≈Çane.">zajƒôcia odwo≈Çane.</option>
                        <option value="Zajƒôcia zwiƒÖzane z tematem wydarzenia.">Zajƒôcia zwiƒÖzane z tematem wydarzenia.</option>
                        <option value="Dzie≈Ñ wolny od zajƒôƒá dydaktyczno-wychowawczych">Dzie≈Ñ wolny od zajƒôƒá dydaktyczno-wychowawczych</option>
                    </select>
                </div>

                <div class="form-buttons">
                    <button type="button" onclick="document.getElementById('eventModal').style.display = 'none'">Anuluj</button>
                    <button type="submit">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dla og≈Çosze≈Ñ -->
    <div class="modal-overlay" id="announcementModal">
        <div class="modal-content">
            <form id="announcementForm">
                <div class="form-group">
                    <label for="announcementTeacher">Nauczyciel:</label>
                    <select id="announcementTeacher" required>
                        <option value="">Wybierz nauczyciela</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="announcementTitle">Tytu≈Ç og≈Çoszenia:</label>
                    <input type="text" id="announcementTitle" required>
                </div>

                <div class="form-group">
                    <label for="announcementContent">Tre≈õƒá og≈Çoszenia:</label>
                    <textarea id="announcementContent" rows="4" required></textarea>
                </div>

                <div class="form-group">
                    <label>Okres wa≈ºno≈õci:</label>
                    <div class="date-range-container">
                        <div class="date-range-item">
                            <label for="announcementDateFrom">Od:</label>
                            <input type="date" id="announcementDateFrom" required>
                        </div>
                        <div class="date-range-item">
                            <label for="announcementDateTo">Do:</label>
                            <input type="date" id="announcementDateTo" required>
                        </div>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" onclick="document.getElementById('announcementModal').style.display = 'none'">Anuluj</button>
                    <button type="submit">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dla aktualno≈õci -->
    <div class="modal-overlay" id="newsModal">
        <div class="modal-content">
            <form id="newsForm">
                <div class="form-group">
                    <label for="newsTitle">Tytu≈Ç aktualno≈õci:</label>
                    <input type="text" id="newsTitle" required>
                </div>

                <div class="form-group">
                    <label for="newsContent">Tre≈õƒá aktualno≈õci:</label>
                    <textarea id="newsContent" rows="4" required></textarea>
                </div>

                <div class="form-buttons">
                    <button type="button" onclick="document.getElementById('newsModal').style.display = 'none'">Anuluj</button>
                    <button type="submit">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dla archiwum -->
    <div class="modal-overlay" id="archiveModal">
        <div class="modal-content archive-modal">
            <h2>Archiwum</h2>
            <div id="archiveContent"></div>
            <div class="form-buttons">
                <button type="button" onclick="document.getElementById('archiveModal').style.display = 'none'">Zamknij</button>
            </div>
        </div>
    </div>

    <script>
        // KONFIGURACJA FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyCFOF0WtZfOSzXFO6gr6kTXwtHlymwGjNU",
            authDomain: "szkola57-ccc80.firebaseapp.com",
            databaseURL: "https://szkola57-ccc80-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "szkola57-ccc80",
            storageBucket: "szkola57-ccc80.appspot.com",
            messagingSenderId: "422165475378",
            appId: "1:422165475378:web:dc7cd50c37451dd7ec4c2b"
        };
        
        // Inicjalizacja Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let currentCategory = 1;
        let announcements = {};
        let archive = [];
        let currentPage = 1;
        const itemsPerPage = 8;
        
        const requiredCategories = [2, 3, 4, 5, 6, 7, 8];

        function saveAnnouncements() {
            // Zapisz zar√≥wno og≈Çoszenia jak i archiwum w jednej transakcji
            const updates = {
                '/announcements': announcements,
                '/archive': archive
            };
            return database.ref().update(updates);
        }

        function loadAnnouncements(callback) {
            // ≈Åaduj obie kolekcje r√≥wnocze≈õnie
            const announcementsPromise = new Promise(resolve => {
                database.ref('announcements').on('value', snapshot => {
                    const data = snapshot.val() || {};
                    // Upewnij siƒô, ≈ºe wszystkie wymagane kategorie istniejƒÖ
                    requiredCategories.forEach(cat => {
                        if (!data[cat]) data[cat] = [];
                    });
                    announcements = data;
                    resolve();
                });
            });

            const archivePromise = new Promise(resolve => {
                database.ref('archive').on('value', snapshot => {
                    archive = snapshot.val() || [];
                    resolve();
                });
            });

            Promise.all([announcementsPromise, archivePromise])
                .then(callback)
                .catch(error => {
                    console.error("B≈ÇƒÖd ≈Çadowania danych:", error);
                    // Ustaw domy≈õlne warto≈õci w przypadku b≈Çƒôdu
                    announcements = {};
                    requiredCategories.forEach(cat => {
                        announcements[cat] = [];
                    });
                    archive = [];
                    callback();
                });
        }

        const nauczyciele = [
            "Jolanta Bosak", "Katarzyna Borzƒôdzin", "Hanna Brzeska", "Anna Brzeska", "Barbara Brz√≥ska",
            "Anna Burakowska", "Sylwia Cze≈õniewicz", "Karol Dƒôbowicz", "Faustyna Dobrzek", "Karolina Dominiak",
            "Ma≈Çgorzata Domaga≈Ça", "Dariusz Drzema≈Ça", "Alicja Rajewicz-Drzema≈Ça", "El≈ºbieta Gawin", "Mateusz Gigo≈Ç≈Ça",
            "Anna Goca≈Ç", "Irynna Goshevniyk", "Gra≈ºyna Gruszka", "Pawe≈Ç Grzegorzewski", "Anna Grze≈õkowiak", "Renata Halczyk", "Danuta Kapciuszko", "Zuzanna Ko≈õnicka", "Marcin Krupnicki", "Jowita Kuter", "Martyna Ko≈Çodziejczyk",
            "Rozalia Lipska", "Zofia Lisek", "Kinga M≈Çodzik", "Karolina M≈Çotek", "Agnieszka Mi≈Çasz", "Daria Musherina",
            "Joanna Ma≈Çek", "Dorota Maszkiewska", "Magdalena Joelesh", "Eugenia Nowodworska", "Tadeusz Ostrowski",
            "Antonina Pawelczyk", "Ludwik Parkowiak", "Natalia Raczy≈Ñska", "Weronika Rogalska", "Renata Skleszewska",
            "Lena Skwierzy≈Ñska", "Katarzyna Sieczko", "Bo≈ºena Szpilkiewicz", "Barbara Strzegomska", "Alicja Stru≈õ-Michalska",
            "Micha≈Ç Tarczyn", "Barbara Trzaskowska", "Ewelina ≈ömigalska", "ks. Ignacy W≈Çoszek", "Celina W≈Çodarczyk",
            "Aleksandra Wykaz", "Michalina Wo≈∫niak", "Marian Wo≈∫niak", "Magdalena Wis≈Çowicz", "Marlena Wyszy≈Ñska", "Urszula Z≈Çoci≈Ñska",
            "Oliwia ≈ªabkiewicz"
        ];

        // Inicjalizacja list nauczycieli
        [document.getElementById('absenceTeacher'), document.getElementById('announcementTeacher')].forEach(select => {
            nauczyciele.forEach(teacher => {
                const option = document.createElement('option');
                option.value = teacher;
                option.textContent = teacher;
                select.appendChild(option);
            });
        });

        document.querySelectorAll('.menu a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                currentCategory = parseInt(link.dataset.category);
                currentPage = 1;
                document.querySelector('.menu a.active').classList.remove('active');
                link.classList.add('active');
                toggleAddButton();
                showAnnouncements();
            });
        });

        // Obs≈Çuga przycisku archiwum
        document.getElementById('archiveButton').addEventListener('click', (e) => {
            e.preventDefault();
            showArchive();
        });

        function showArchive() {
            const archiveContent = document.getElementById('archiveContent');
            archiveContent.innerHTML = '';
            
            if (archive.length === 0) {
                archiveContent.innerHTML = '<p>Archiwum jest puste.</p>';
            } else {
                archive.forEach((item, index) => {
                    const archiveItem = document.createElement('div');
                    archiveItem.className = 'archive-item';
                    
                    const formatDate = (dateStr) => {
                        if (!dateStr) return '';
                        const [year, month, day] = dateStr.split('-');
                        return `${day.padStart(2, '0')}.${month.padStart(2, '0')}.${year}`;
                    };
                    
                    let content = '';
                    if (item.category === 4) {
                        // Nieobecno≈õƒá
                        const from = formatDate(item.dateFrom);
                        const to = formatDate(item.dateTo);
                        content = `
                            <h3>Nieobecno≈õƒá: ${item.teacher}</h3>
                            <p>Okres: ${from} - ${to} ${item.hours ? `(${item.hours})` : ''}</p>
                            <p>Pow√≥d: ${item.reason}</p>
                        `;
                    } else if (item.category === 2) {
                        // Wydarzenie
                        content = `
                            <h3>Wydarzenie: ${item.name}</h3>
                            <p>Data: ${formatDate(item.date)} ${item.hours ? `(${item.hours})` : ''}</p>
                            <p>Kategoria: ${item.category}</p>
                        `;
                    } else if (item.category === 3) {
                        // Og≈Çoszenie
                        const from = formatDate(item.dateFrom);
                        const to = formatDate(item.dateTo);
                        content = `
                            <h3>Og≈Çoszenie: ${item.teacher} - ${item.title}</h3>
                            <p>Okres wa≈ºno≈õci: ${from} - ${to}</p>
                            <p>${item.content}</p>
                        `;
                    } else if (item.category === 5) {
                        // Aktualno≈õƒá
                        content = `
                            <h3>Aktualno≈õƒá: ${item.title}</h3>
                            <p>${item.content}</p>
                        `;
                    } else {
                        // Inne
                        content = `
                            <h3>${item.title || 'Brak tytu≈Çu'}</h3>
                            <p>${item.content || 'Brak tre≈õci'}</p>
                        `;
                    }
                    
                    const deletedDate = new Date(item.deletedAt || Date.now());
                    content += `
                        <p><small>Usuniƒôte: ${deletedDate.toLocaleString()}</small></p>
                        <p><small>Kategoria: ${getCategoryName(item.category)}</small></p>
                        <div class="actions">
                            <button class="restore" onclick="restoreFromArchive(${index})">Przywr√≥ƒá</button>
                            <button class="delete-permanent" onclick="deleteFromArchive(${index})">Usu≈Ñ na zawsze</button>
                        </div>
                    `;
                    
                    archiveItem.innerHTML = content;
                    archiveContent.appendChild(archiveItem);
                });
            }
            
            document.getElementById('archiveModal').style.display = 'flex';
        }

        function restoreFromArchive(index) {
            const item = archive[index];
            if (confirm(`Czy na pewno chcesz przywr√≥ciƒá to og≈Çoszenie do kategorii ${getCategoryName(item.category)}?`)) {
                // Dodaj do odpowiedniej kategorii
                announcements[item.category].unshift(item);
                // Usu≈Ñ z archiwum
                archive.splice(index, 1);
                // Zapisz zmiany
                saveAnnouncements().then(() => {
                    showArchive();
                    showAnnouncements();
                });
            }
        }

        function deleteFromArchive(index) {
            if (confirm('Czy na pewno chcesz trwale usunƒÖƒá to og≈Çoszenie z archiwum?')) {
                archive.splice(index, 1);
                saveAnnouncements().then(() => {
                    showArchive();
                });
            }
        }

        function getCategoryName(categoryId) {
            const categories = {
                1: 'Strona G≈Ç√≥wna',
                2: 'Wydarzenia',
                3: 'Og≈Çoszenia',
                4: 'Nieobecno≈õci',
                5: 'Aktualno≈õci',
                6: 'SamorzƒÖd Uczniowski i Wolontariat',
                7: 'Klasy 1-3 i ≈öwietlica',
                8: 'Dla Nauczycieli',
                9: 'Grono Pedagogiczne',
                10: 'Wychowawcy',
                11: 'Wa≈ºne Informacje'
            };
            return categories[categoryId] || 'Nieznana kategoria';
        }

        function showAnnouncements() {
            const container = document.getElementById('announcements');
            container.innerHTML = '';
            
            if(currentCategory === 1) {
                container.innerHTML = `
                    <div class="homepage-content">
                        <h2>Witamy w Szkole Podstawowej nr 57 we Wroc≈Çawiu!</h2>
                        <p>Witamy na stronie najlepszej szko≈Çy w Polsce!<br>
                        Zapraszamy do naszej krainy edukacji! <br>
                        Email: fillzster@gmail.com</p>
                        
                        <h3>O naszej szkole</h3>
                        <p>Jeste≈õmy szko≈ÇƒÖ kt√≥rej niczego nie brakuje! Klasy og√≥lne, sportowe, muzyczne, a nawet jƒôzykowe! Posiadamy wykwalifikowanƒÖ kadrƒô i cudownƒÖ dyrekcjƒô!</p>
                        <h3>REKRUTACJA 2025/2026</h3>
                    <p> Z przykro≈õciƒÖ informujemy ≈ºe,
Wszystkie miejsca w rekrutacji na rok 2025/2026 do klas pierwszych SƒÑ ZAJƒòTE! Wszystkie trzy klasy sƒÖ ju≈º w ca≈Ço≈õci, dziƒôkujemy wiƒôc wszystkim, kt√≥rzy zdecydowali siƒô udostƒôpniƒá rekrutacje, jak i tym kt√≥rzy wybrali akurat naszƒÖ stronƒô. Gwarantujemy, ≈ºe w naszej szkole, bƒôdzie wam siƒô podobaƒá! </p>
                        <p> Oto klasy pierwsze na rok 2025/2026 </p>
                        <h3>1A - klasa og√≥lna</h3>
                        <h3>1B - klasa og√≥lno-jƒôzykowa (jƒôzyk angielski, niemiecki)</h3>
                        <h3>1M - klasa Muzyczna (kszta≈Çcenie s≈Çuchu, nauka o muzyce)</h3>
                        <h3>DO ZOBACZENIA!</h3>

                        <h3>Godziny otwarcia</h3>
                        <p>Szko≈Ça: Pon-Pt: 7:00-17:00<br>
                        <p>Sekretariat: Pon-Pt: 7:50-15:50<br>
                    </div>`;
                return;
            }

            if(currentCategory === 11) {
                container.innerHTML = `
                    <div class="homepage-content">
                        <h1>Szkolne Wa≈ºne Dokumenty</h1>
                        <div class="tekst">
                    Tre≈õƒá informacji (brak)
                        </div> </div>
                    <h2>Opieka Nadzorcza ‚Äì wtorek 22 kwietnia 2025</h2>
<p>W godzinach 7:30‚Äì16:30 szko≈Ça organizuje opiekƒô nadzorczƒÖ dla uczni√≥w klas 1‚Äì8. Uczniowie zostali przypisani do grup i sal zgodnie z poni≈ºszym harmonogramem:</p>

<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; width: 100%; text-align: center;">
  <thead style="background-color: #f0f0f0;">
    <tr>
      <th>Grupa</th>
      <th>Klasy</th>
      <th>Sala</th>
      <th>I zmiana (7:30‚Äì12:00)</th>
      <th>II zmiana (12:00‚Äì16:30)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>g1</td>
      <td>1a, 1b, 1c, 2c</td>
      <td>28</td>
      <td>Zuzanna Ko≈õnicka</td>
      <td>Daria Musherina</td>
    </tr>
    <tr>
      <td>g2</td>
      <td>2a, 2b, 3a, 3b</td>
      <td>26</td>
      <td>Faustyna Dobrzek</td>
      <td>Alicja Stru≈õ-Michalska</td>
    </tr>
    <tr>
      <td>g3</td>
      <td>3c, 4a, 4b, 4c</td>
      <td>25</td>
      <td>Aleksandra Malczyk</td>
      <td>Sylwia Cze≈õniewicz</td>
    </tr>
    <tr>
      <td>g4</td>
      <td>5a, 5b, 5m, 6m</td>
      <td>24</td>
      <td>Kinga M≈Çodzik</td>
      <td>Karol Dƒôbowicz</td>
    </tr>
    <tr>
      <td>g5</td>
      <td>6a, 6b, 7a, 7b</td>
      <td>23</td>
      <td>Michalina Wo≈∫niak</td>
      <td>Anna Goca≈Ç</td>
    </tr>
    <tr>
      <td>g6</td>
      <td>7m, 8a, 8b, 8m</td>
      <td>22</td>
      <td>Janina Kuter</td>
      <td>Karolina Dominiak</td>
    </tr>
  </tbody>
</table>
`;
                return;
            }

            if(currentCategory === 6) {
                container.innerHTML = `
                    <div class="su-info">
                        <h3>SamorzƒÖd Uczniowski 1-3</h3>
                        <p>Opiekun SamorzƒÖdu 1-3: Anna Brzeska<br>
                        Godzina Dostƒôpno≈õci: Poniedzia≈Çek 13:45-14:30<br>
                        <h3>SamorzƒÖd Uczniowski 4-8</h3>
                        <p>Opiekun SamorzƒÖdu i Wolontariatu: Micha≈Ç Tarczyn<br>
                        PrzewodniczƒÖca Szko≈Çy: Olga Siwiec<br>
                        Godzina Dostƒôpno≈õci: ≈öroda 11:35-13:35<br>
                        Zebranie SamorzƒÖdu Uczniowskiego: ≈öroda 12:30-12:50</p>
                        <p></p>
                        <img src="https://raw.githubusercontent.com/fillxd/sz57/a1a7657b33999bc4c120299d3d9ef2f8001960ca/Samorz%C4%85d%20Uczniowski.png" alt="SamorzƒÖd" width="500">
                    </div>`;
                return;
            }

            if(currentCategory === 9) {
                container.innerHTML = `
                    <table class="teachers-table">
                        <thead>
                            <tr>
                                <th>Przedmiot</th>
                                <th>Nauczyciele</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Jƒôzyk Polski</td><td>Oliwia ≈ªabkiewicz, Anna Burakowska, Dorota Maszkiewska, Jowita Kuter, El≈ºbieta Gawin</td></tr>
                            <tr><td>Matematyka</td><td>Bo≈ºena Szpilkiewicz, Renata Skleszewska, Joanna Ma≈Çek, Micha≈Ç Tarczyn, Tadeusz Ostrowski, Gra≈ºyna Gruszka</td></tr>
                            <tr><td>Jƒôzyk Angielski</td><td>Katarzyna Sieczko, Zofia Lisek, Celina W≈Çodarczyk, Anna Goca≈Ç, Karolina Dominiak, Magdalena Wis≈Çowicz, Marlena Wyszy≈Ñska</td></tr>
                            <tr><td>Jƒôzyk Niemiecki</td><td>Magdalena Joelesh, Barbara Strzegomska</td></tr>
                            <tr><td>Wychowanie Fizyczne</td><td>Ma≈Çgorzata Domaga≈Ça, Sylwia Cze≈õniewicz, Mateusz Gigo≈Ç≈Ça, Kinga M≈Çodzik, Natalia Raczy≈Ñska, Marcin Krupnicki</td></tr>
                            <tr><td>Historia</td><td>Pawe≈Ç Grzegorzewski, Karol Dƒôbowicz</td></tr>
                            <tr><td>Biologia, Przyroda</td><td>Michalina Wo≈∫niak</td></tr>
                            <tr><td>doradztwo zawodowe</td><td>Martyna Ko≈Çodziejczyk</td></tr>
                            <tr><td>Plastyka</td><td>Barbara Trzaskowska</td></tr>
                            <tr><td>Technika</td><td>Ludwik Parkowiak</td></tr>
                            <tr><td>Chemia</td><td>Tadeusz Ostrowski</td></tr>
                            <tr><td>Fizyka</td><td>Marian Wo≈∫niak</td></tr>
                            <tr><td>Wiedza o spo≈Çecze≈Ñstwie</td><td>Ludwik Parkowiak</td></tr>
                            <tr><td>Edukacja dla bezpiecze≈Ñstwa</td><td>Dariusz Drzema≈Ça</td></tr>
                            <tr><td>Geografia</td><td>Mateusz Gigo≈Ç≈Ça</td></tr>
                            <tr><td>Informatyka</td><td>Ewelina ≈ömigalska</td></tr>
                            <tr><td>Muzyka</td><td>Hanna Brzeska, Magdalena Joelesh, Antonina Pawelczyk</td></tr>
                            <tr><td>Religia</td><td>ks. Ignacy W≈Çoszek, Eugenia Nowodworska</td></tr>
                            <tr><td>Kszta≈Çcenie S≈Çuchu, Nauka o Muzyce</td><td>Antonina Pawelczyk</td></tr>
                            <tr><td>Edukacja Wczesnoszkolna</td><td>Rozalia Lipska, Faustyna Dobrzek, Daria Musherina, Anna Brzeska, Agnieszka Mi≈Çasz, Danuta Kapciuszko, Katarzyna Buzdro, Jolanta Bosak, Alicja Rajewicz-Drzema≈Ça, Weronika Rogalska</td></tr>
                            <tr><td>Basen</td><td>Ma≈Çgorzata Domaga≈Ça, Kinga M≈Çodzik</td></tr>
                            <tr><td>Trening Zewnƒôtrzny</td><td>Ma≈Çgorzata Domaga≈Ça, Rozalia Lipska, Faustyna Dobrzek</td></tr>
                            <tr><td>≈öwietlica</td><td>Alicja Stru≈õ-Michalska, Zuzanna Ko≈õnicka, Katarzyna Borzƒôdzin, Barbara Strzegomska, Anna Brzeska, El≈ºbieta Gawin, Daria Musherina, Ignacy W≈Çoszek, Urszula Z≈Çoci≈Ñska, Barbara Brz√≥ska, Martyna Ko≈Çodziejczyk, Mateusz Gigo≈Ç≈Ça, Anna Goca≈Ç</td></tr>
                            <tr><td>Etyka</td><td>Renata Halczyk</td></tr>
                            <tr><td>Nauczyciel WspomagajƒÖcy</td><td>Aleksandra Malczyk, Dariusz Drzema≈Ça, Irynna Goshevniyk, Zuzanna Ko≈õnicka, Marcin Krupnicki</td></tr>
                            <tr><td>Pedagog</td><td>Aleksandra Wykaz, Anna Grze≈õkowiak</td></tr>
                            <tr><td>Biblioteka</td><td>Karolina M≈Çotek</td></tr>
                            <tr><td>Dyrekcja</td><td>Lena Skwierzy≈Ñska (1-3), Mateusz Gigo≈Ç≈Ça (4-8)</td></tr>
                            <tr><td>Kierownik</td><td>Katarzyna Borzƒôdzin, Renata Halczyk</td></tr>
                        </tbody>
                    </table>`;
                return;
            }

            if(currentCategory === 10) {
                container.innerHTML = `
                    <table class="tutors-table">
                        <thead>
                            <tr>
                                <th>Klasa</th>
                                <th>Wychowawca</th>
                                <th>Nauczyciel WspomagajƒÖcy</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1a</td><td>Jolanta Bosak</td><td></td></tr>
                            <tr><td>1b</td><td>Rozalia Lipska</td><td></td></tr>
                            <tr><td>1c</td><td>Faustyna Dobrzek</td><td></td></tr>
                            <tr><td>2a</td><td>Alicja Rajewicz-Drzema≈Ça</td><td></td></tr>
                            <tr><td>2b</td><td>Agnieszka Mi≈Çasz</td><td></td></tr>
                            <tr><td>2c</td><td>Daria Musherina</td><td>Irynna Goshevniyk</td></tr>
                            <tr><td>3a</td><td>Katarzyna Buzdro</td><td></td></tr>
                            <tr><td>3b</td><td>Anna Brzeska</td><td></td></tr>
                            <tr><td>3c</td><td>Danuta Kapciuszko</td><td></td></tr>
                            <tr><td>4a</td><td>Renata Skleszewska</td><td></td></tr>
                            <tr><td>4b</td><td>Mateusz Gigo≈Ç≈Ça</td><td></td></tr>
                            <tr><td>4c</td><td>Natalia Raczy≈Ñska</td><td>Marcin Krupnicki</td></tr>
                            <tr><td>5a</td><td>Katarzyna Sieczko</td><td></td></tr>
                            <tr><td>5b</td><td>Dorota Maszkiewska</td><td></td></tr>
                            <tr><td>5m</td><td>Antonina Pawelczyk</td><td></td></tr>
                            <tr><td>6a</td><td>Bo≈ºena Szpilkiewicz</td><td></td></tr>
                            <tr><td>6b</td><td>Kinga M≈Çodzik</td><td></td></tr>
                            <tr><td>6m</td><td>Ma≈Çgorzata Domaga≈Ça</td><td>Dariusz Drzema≈Ça</td></tr>
                            <tr><td>7a</td><td>Celina W≈Çodarczyk</td><td>Zuzanna Ko≈õnicka</td></tr>
                            <tr><td>7b</td><td>Magdalena Joelesh</td><td></td></tr>
                            <tr><td>7m</td><td>Ewelina ≈ömigalska</td><td></td></tr>
                            <tr><td>8a</td><td>Karol Dƒôbowicz</td><td>Aleksandra Malczyk</td></tr>
                            <tr><td>8b</td><td>Micha≈Ç Tarczyn</td><td></td></tr>
                            <tr><td>8m</td><td>Ludwik Parkowiak</td><td></td></tr>
                        </tbody>
                    </table>`;
                return;
            }

            // PAGINACJA TYLKO DLA KATEGORII 5
            if(currentCategory === 5) {
                const allAnnouncements = announcements[currentCategory] || [];
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const pagedAnnouncements = allAnnouncements.slice(startIndex, endIndex);

                pagedAnnouncements.forEach((ann, index) => {
                    container.appendChild(createAnnouncementCard(ann, startIndex + index));
                });

                const totalPages = Math.ceil(allAnnouncements.length / itemsPerPage);
                if(totalPages > 1) {
                    const pagination = document.createElement('div');
                    pagination.className = 'pagination';
                    
                    for(let i = 1; i <= totalPages; i++) {
                        const pageBtn = document.createElement('button');
                        pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                        pageBtn.textContent = i;
                        pageBtn.onclick = () => {
                            currentPage = i;
                            showAnnouncements();
                        };
                        pagination.appendChild(pageBtn);
                    }
                    container.appendChild(pagination);
                }
            } else {
                // DLA INNYCH KATEGORII BEZ PAGINACJI
                const categoryAnnouncements = announcements[currentCategory] || [];
                categoryAnnouncements.forEach((ann, index) => {
                    container.appendChild(createAnnouncementCard(ann, index));
                });
            }
        }

        function createAnnouncementCard(ann, index) {
            const div = document.createElement('div');
            div.className = 'announcement-card';
            
            const formatDate = (dateStr) => {
                if (!dateStr) return '';
                const [year, month, day] = dateStr.split('-');
                return `${day.padStart(2, '0')}.${month.padStart(2, '0')}`;
            };

            let dateRange = '';
            if(ann.dateFrom && ann.dateTo) {
                const from = formatDate(ann.dateFrom);
                const to = formatDate(ann.dateTo);
                dateRange = from === to ? from : `${from} - ${to}`;
            }
            
            div.innerHTML = `
                <div class="actions">
                    <span class="delete" onclick="deleteAnnouncement(${index})">üóëÔ∏è</span>
                    <span class="edit" onclick="editAnnouncement(${index})">‚úèÔ∏è</span>
                    <span class="move" onclick="moveAnnouncement(${index}, 'up')">‚¨ÜÔ∏è</span>
                    <span class="move" onclick="moveAnnouncement(${index}, 'down')">‚¨áÔ∏è</span>
                </div>
                ${currentCategory === 4 ? `
                    <h2>${dateRange}${ann.hours && ann.hours !== 'ca≈Çy dzie≈Ñ' ? ` (${ann.hours})` : ''}</h2>
                    <p><strong>${ann.teacher || 'Brak danych'}</strong></p>
                    <p>${ann.reason || 'Brak powodu'}</p>
                ` : currentCategory === 2 ? `
                    <h2>${formatDate(ann.date)}${ann.hours && ann.hours !== 'ca≈Çy dzie≈Ñ' ? ` (${ann.hours})` : ''}</h2>
                    <p><strong>${ann.name || 'Brak nazwy'}</strong></p>
                    <p>Kategoria: ${ann.category || 'Brak kategorii'}</p>
                ` : currentCategory === 3 ? `
                    <h2>${ann.teacher || 'Brak nauczyciela'}: ${ann.title || 'Brak tytu≈Çu'} (${dateRange})</h2>
                    <div class="announcement-content">${ann.content || 'Brak tre≈õci'}</div>
                    <span class="time">${timeAgo(ann.timestamp)}</span>
                ` : currentCategory === 5 ? `
                    <h2>${ann.title || 'Brak tytu≈Çu'}</h2>
                    <div class="announcement-content">${ann.content || 'Brak tre≈õci'}</div>
                    <span class="time">${timeAgo(ann.timestamp)}</span>
                ` : `
                    <h2>${ann.title || 'Brak tytu≈Çu'}</h2>
                    <div class="announcement-content">${ann.content || 'Brak tre≈õci'}</div>
                    <span class="time">${timeAgo(ann.timestamp)}</span>
                `}
            `;
            return div;
        }

        function deleteAnnouncement(index) {
            if(confirm('Czy na pewno chcesz przenie≈õƒá ten wpis do archiwum?')) {
                const deletedItem = announcements[currentCategory][index];
                // Dodaj informacje o kategorii i czasie usuniƒôcia
                deletedItem.category = currentCategory;
                deletedItem.deletedAt = Date.now();
                
                // Dodaj do archiwum
                archive.unshift(deletedItem);
                // Usu≈Ñ z aktualnej kategorii
                announcements[currentCategory].splice(index, 1);
                
                // Zapisz zmiany
                saveAnnouncements()
                    .then(() => {
                        showAnnouncements();
                    })
                    .catch(error => {
                        console.error("B≈ÇƒÖd podczas zapisywania:", error);
                        alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas przenoszenia do archiwum.");
                    });
            }
        }

        function editAnnouncement(index) {
            if (currentCategory === 4) {
                const absence = announcements[currentCategory][index];
                const newDateFrom = prompt('Edytuj datƒô poczƒÖtkowƒÖ (RRRR-MM-DD):', absence.dateFrom);
                if (!newDateFrom) return;

                const newDateTo = prompt('Edytuj datƒô ko≈ÑcowƒÖ (RRRR-MM-DD):', absence.dateTo);
                if (!newDateTo) return;

                const newHours = prompt('Edytuj godziny:', absence.hours || 'ca≈Çy dzie≈Ñ');
                if (!newHours) return;

                const newTeacher = prompt('Edytuj nauczyciela:', absence.teacher);
                if (!newTeacher) return;

                const newReason = prompt('Edytuj pow√≥d:', absence.reason);
                if (!newReason) return;

                absence.dateFrom = newDateFrom;
                absence.dateTo = newDateTo;
                absence.hours = newHours === 'ca≈Çy dzie≈Ñ' ? null : newHours;
                absence.teacher = newTeacher;
                absence.reason = newReason;
            } else if (currentCategory === 2) {
                const event = announcements[currentCategory][index];
                const newDate = prompt('Edytuj datƒô:', event.date);
                if (!newDate) return;

                const newHours = prompt('Edytuj godziny:', event.hours || 'ca≈Çy dzie≈Ñ');
                if (!newHours) return;

                const newName = prompt('Edytuj nazwƒô wydarzenia:', event.name);
                if (!newName) return;

                const newCategory = prompt('Edytuj kategoriƒô:', event.category);
                if (!newCategory) return;

                event.date = newDate;
                event.hours = newHours === 'ca≈Çy dzie≈Ñ' ? null : newHours;
                event.name = newName;
                event.category = newCategory;
            } else if (currentCategory === 3) {
                const announcement = announcements[currentCategory][index];
                const newTeacher = prompt('Edytuj nauczyciela:', announcement.teacher);
                if (!newTeacher) return;

                const newTitle = prompt('Edytuj tytu≈Ç:', announcement.title);
                if (!newTitle) return;

                const newContent = prompt('Edytuj tre≈õƒá:', announcement.content);
                if (!newContent) return;

                const newDateFrom = prompt('Edytuj datƒô poczƒÖtkowƒÖ (RRRR-MM-DD):', announcement.dateFrom);
                if (!newDateFrom) return;

                const newDateTo = prompt('Edytuj datƒô ko≈ÑcowƒÖ (RRRR-MM-DD):', announcement.dateTo);
                if (!newDateTo) return;

                announcement.teacher = newTeacher;
                announcement.title = newTitle;
                announcement.content = newContent;
                announcement.dateFrom = newDateFrom;
                announcement.dateTo = newDateTo;
            } else if (currentCategory === 5) {
                const news = announcements[currentCategory][index];
                const newTitle = prompt('Edytuj tytu≈Ç:', news.title);
                if (!newTitle) return;

                const newContent = prompt('Edytuj tre≈õƒá:', news.content);
                if (!newContent) return;

                news.title = newTitle;
                news.content = newContent;
            } else {
                const newTitle = prompt('Edytuj tytu≈Ç:', announcements[currentCategory][index].title);
                if (!newTitle) return;

                const newContent = prompt('Edytuj tre≈õƒá:', announcements[currentCategory][index].content);
                if (!newContent) return;

                announcements[currentCategory][index].title = newTitle;
                announcements[currentCategory][index].content = newContent;
            }

            saveAnnouncements()
                .then(() => showAnnouncements())
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas zapisywania zmian.");
                });
        }

        function moveAnnouncement(index, direction) {
            const arr = announcements[currentCategory];
            if(direction === 'up' && index > 0) {
                [arr[index], arr[index - 1]] = [arr[index - 1], arr[index]];
            } else if(direction === 'down' && index < arr.length - 1) {
                [arr[index], arr[index + 1]] = [arr[index + 1], arr[index]];
            }
            saveAnnouncements()
                .then(() => showAnnouncements())
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas przesuwania og≈Çoszenia.");
                });
        }

        function timeAgo(timestamp) {
            if (!timestamp) return 'brak daty';
            const now = Date.now();
            const diff = now - timestamp;
            
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);

            if (days > 0) return `${days} dni temu`;
            if (hours > 0) return `${hours} godz. temu`;
            if (minutes > 0) return `${minutes} min. temu`;
            return `${seconds} sek. temu`;
        }

        function toggleAddButton() {
            const btn = document.getElementById('addButton');
            btn.style.display = [1, 9, 10, 11].includes(currentCategory) ? 'none' : 'block';
            btn.textContent = currentCategory === 4 ? 'Dodaj Nieobecno≈õƒá' : 
                             currentCategory === 2 ? 'Dodaj Wydarzenie' : 
                             currentCategory === 3 ? 'Dodaj Og≈Çoszenie' : 
                             currentCategory === 5 ? 'Dodaj Aktualno≈õƒá' :
                             'Dodaj Og≈Çoszenie';
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadAnnouncements(() => {
                showAnnouncements();
                toggleAddButton();
            });
        });

        // Obs≈Çuga formularzy
        document.getElementById('absenceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newAbsence = {
                dateFrom: document.getElementById('absenceDateFrom').value,
                dateTo: document.getElementById('absenceDateTo').value,
                hours: document.getElementById('absenceHours').value,
                teacher: document.getElementById('absenceTeacher').value,
                reason: document.getElementById('absenceReason').value,
                timestamp: Date.now()
            };

            if (!newAbsence.dateFrom || !newAbsence.dateTo || !newAbsence.hours || !newAbsence.teacher || !newAbsence.reason) {
                alert('Proszƒô wype≈Çniƒá wszystkie pola!');
                return;
            }

            announcements[currentCategory].unshift(newAbsence);
            saveAnnouncements()
                .then(() => {
                    showAnnouncements();
                    document.getElementById('absenceModal').style.display = 'none';
                    this.reset();
                })
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas dodawania nieobecno≈õci.");
                });
        });

        document.getElementById('eventForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newEvent = {
                date: document.getElementById('eventDate').value,
                hours: document.getElementById('eventHours').value,
                name: document.getElementById('eventName').value,
                category: document.getElementById('eventCategory').value,
                timestamp: Date.now()
            };

            if (!newEvent.date || !newEvent.hours || !newEvent.name || !newEvent.category) {
                alert('Proszƒô wype≈Çniƒá wszystkie pola!');
                return;
            }

            announcements[currentCategory].unshift(newEvent);
            saveAnnouncements()
                .then(() => {
                    showAnnouncements();
                    document.getElementById('eventModal').style.display = 'none';
                    this.reset();
                })
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas dodawania wydarzenia.");
                });
        });

        document.getElementById('announcementForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newAnnouncement = {
                teacher: document.getElementById('announcementTeacher').value,
                title: document.getElementById('announcementTitle').value,
                content: document.getElementById('announcementContent').value,
                dateFrom: document.getElementById('announcementDateFrom').value,
                dateTo: document.getElementById('announcementDateTo').value,
                timestamp: Date.now()
            };

            if (!newAnnouncement.teacher || !newAnnouncement.title || !newAnnouncement.content || !newAnnouncement.dateFrom || !newAnnouncement.dateTo) {
                alert('Proszƒô wype≈Çniƒá wszystkie pola!');
                return;
            }

            announcements[3].unshift(newAnnouncement);
            saveAnnouncements()
                .then(() => {
                    showAnnouncements();
                    document.getElementById('announcementModal').style.display = 'none';
                    this.reset();
                })
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas dodawania og≈Çoszenia.");
                });
        });

        document.getElementById('newsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newNews = {
                title: document.getElementById('newsTitle').value,
                content: document.getElementById('newsContent').value,
                timestamp: Date.now()
            };

            if (!newNews.title || !newNews.content) {
                alert('Proszƒô wype≈Çniƒá wszystkie pola!');
                return;
            }

            announcements[5].unshift(newNews);
            saveAnnouncements()
                .then(() => {
                    showAnnouncements();
                    document.getElementById('newsModal').style.display = 'none';
                    this.reset();
                })
                .catch(error => {
                    console.error("B≈ÇƒÖd podczas zapisywania:", error);
                    alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas dodawania aktualno≈õci.");
                });
        });

        function handleAddButton() {
            if (currentCategory === 4) {
                addAbsence();
            } else if (currentCategory === 2) {
                addEvent();
            } else if (currentCategory === 3) {
                addAnnouncement();
            } else if (currentCategory === 5) {
                addNews();
            } else {
                const title = prompt('Podaj tytu≈Ç og≈Çoszenia:');
                if (!title) return;
                
                const content = prompt('Podaj tre≈õƒá og≈Çoszenia:');
                if (!content) return;

                const newAnn = {
                    title,
                    content,
                    timestamp: Date.now()
                };

                announcements[currentCategory].unshift(newAnn);
                saveAnnouncements()
                    .then(() => showAnnouncements())
                    .catch(error => {
                        console.error("B≈ÇƒÖd podczas zapisywania:", error);
                        alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas dodawania og≈Çoszenia.");
                    });
            }
        }

        function addAbsence() {
            document.getElementById('absenceModal').style.display = 'flex';
        }

        function addEvent() {
            document.getElementById('eventModal').style.display = 'flex';
        }

        function addAnnouncement() {
            document.getElementById('announcementModal').style.display = 'flex';
        }

        function addNews() {
            document.getElementById('newsModal').style.display = 'flex';
        }
    </script>
</body>
</html>
