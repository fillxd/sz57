<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

																					<!-- TYTUŁ STRONY INTERNETOWEJ - wyświetlany w przeglądarce --!>
<title>SP 57</title> 

																										<!-- IKONA STRONY INTERNETOWEJ --!>
<link rel="icon" type="image/x-icon" href="favicon.png"> 

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.tekst {
white-space: pre-line;
font-size: 18px;
}
body {
background-color: #f0f2f5;
}
.header {
text-align: center;
padding: 3rem 1rem;
background: linear-gradient(135deg, #4a90e2, #34495e);
color: white;
position: relative;
overflow: hidden;
}
.header h1 {
font-size: 2.5rem;
margin-bottom: 0.5rem;
animation: titleSlide 1s ease-out;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}
@keyframes titleSlide {
from { transform: translateY(-100px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}
.header::after {
content: '';
position: absolute;
bottom: -50px;
left: -50px;
width: 100px;
height: 100px;
background: rgba(255, 255, 255, 0.1);
transform: rotate(45deg);
animation: shine 4s infinite;
}
@keyframes shine {
0% { left: -50px; }
100% { left: 110%; }
}
.search-container {
position: absolute;
top: 20px;
right: 20px;
display: flex;
gap: 10px;
}
.search-container a {
color: white;
text-decoration: none;
padding: 0.8rem 1.5rem;
border-radius: 25px;
transition: all 0.3s ease;
background-color: rgba(255, 255, 255, 0.1);
display: flex;
align-items: center;
white-space: nowrap;
}
.search-container a:hover {
background-color: rgba(255, 255, 255, 0.2);
transform: translateY(-2px);
}
nav {
background: linear-gradient(135deg, #4a90e2, #34495e);
padding: 1rem;
position: sticky;
top: 0;
box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
z-index: 100;
}
.menu {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
}
.menu a {
color: white;
text-decoration: none;
padding: 0.8rem 1rem;
border-radius: 25px;
transition: all 0.3s ease;
background-color: rgba(255, 255, 255, 0.1);
display: flex;
align-items: center;
white-space: nowrap;
flex: 1 1 20%;
text-align: center;
justify-content: center;
}
.menu a:hover {
background-color: rgba(255, 255, 255, 0.2);
transform: translateY(-2px);
}
.menu a.active {
background-color: #e74c3c;
}
.container {
max-width: 1200px;
margin: 2rem auto;
padding: 0 1rem;
}
.announcement-card {
background: white;
border-radius: 10px;
padding: 1.5rem;
margin-bottom: 1.5rem;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
animation: fadeIn 0.5s ease;
position: relative;
}
.announcement-card h2 {
color: #2c3e50;
margin-bottom: 0.5rem;
}
.announcement-card .time {
color: #7f8c8d;
font-size: 0.9rem;
margin-top: 1rem;
display: block;
}
.announcement-card .actions {
position: absolute;
top: 1rem;
right: 1rem;
display: flex;
gap: 0.5rem;
}
.announcement-card .actions span {
cursor: pointer;
font-size: 1.2rem;
transition: all 0.2s ease;
}
.announcement-card .actions span:hover {
transform: scale(1.1);
}
.announcement-card .actions .delete {
color: #e74c3c;
}
.announcement-card .actions .edit {
color: #3498db;
}
.announcement-card .actions .move {
color: #2ecc71;
}
.homepage-content {
background: white;
border-radius: 10px;
padding: 2rem;
line-height: 1.8;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.su-info {
background: white;
border-radius: 10px;
padding: 1.5rem;
margin-bottom: 1.5rem;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
font-size: 0.95rem;
color: #34495e;
}
.su-info h3 {
color: #2c3e50;
margin-bottom: 1rem;
}
.teachers-table, .tutors-table {
width: 100%;
border-collapse: collapse;
margin-top: 1rem;
background: white;
border-radius: 10px;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.teachers-table th, .teachers-table td,
.tutors-table th, .tutors-table td {
padding: 1rem;
text-align: left;
border-bottom: 1px solid #f0f2f5;
}
.teachers-table th, .tutors-table th {
background-color: #4a90e2;
color: white;
}
.teachers-table tr:hover, .tutors-table tr:hover {
background-color: #f9f9f9;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
.add-button {
background: #27ae60;
color: white;
border: none;
padding: 1rem 2rem;
border-radius: 30px;
cursor: pointer;
font-size: 1.1rem;
transition: all 0.3s ease;
margin-bottom: 2rem;
}
.add-button:hover {
background: #219a52;
transform: scale(1.05);
}
.modal-overlay {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.5);
display: none;
justify-content: center;
align-items: center;
z-index: 1000;
}
.modal-content {
background: white;
padding: 2rem;
border-radius: 10px;
width: 90%;
max-width: 500px;
}
.form-group {
margin-bottom: 1rem;
}
.form-group label {
display: block;
margin-bottom: 0.5rem;
color: #2c3e50;
}
.form-group input,
.form-group select,
.form-group textarea {
width: 100%;
padding: 0.8rem;
border: 1px solid #ddd;
border-radius: 4px;
font-size: 1rem;
}
.form-group textarea {
resize: vertical;
min-height: 100px;
white-space: pre-wrap;
}
.date-range-container {
display: flex;
gap: 1rem;
}
.date-range-item {
flex: 1;
}
.form-buttons {
margin-top: 1.5rem;
display: flex;
gap: 1rem;
justify-content: flex-end;
}
.form-buttons button {
padding: 0.8rem 1.5rem;
border: none;
border-radius: 4px;
cursor: pointer;
transition: all 0.3s ease;
}
.form-buttons button[type="submit"] {
background: #27ae60;
color: white;
}
.form-buttons button[type="button"] {
background: #e74c3c;
color: white;
}
.pagination {
display: flex;
justify-content: center;
gap: 0.5rem;
margin: 2rem 0;
}
.page-btn {
padding: 0.5rem 1rem;
border: 1px solid #4a90e2;
border-radius: 4px;
background: white;
cursor: pointer;
transition: all 0.3s ease;
}
.page-btn.active {
background: #4a90e2;
color: white;
border-color: #4a90e2;
}
.page-btn:hover:not(.active) {
background: #f0f2f5;
}
.announcement-content {
white-space: pre-line;
line-height: 1.6;
margin: 1rem 0;
}
/* Archiwum modal */
.archive-modal {
max-height: 80vh;
overflow-y: auto;
}
.archive-item {
background: #f9f9f9;
padding: 1rem;
margin-bottom: 0.5rem;
border-radius: 5px;
border-left: 4px solid #4a90e2;
}
.archive-item h3 {
margin-bottom: 0.5rem;
color: #2c3e50;
}
.archive-item p {
color: #7f8c8d;
font-size: 0.9rem;
}
.archive-item .actions {
margin-top: 0.5rem;
display: flex;
gap: 0.5rem;
}
.archive-item .actions button {
padding: 0.3rem 0.6rem;
border: none;
border-radius: 3px;
cursor: pointer;
font-size: 0.8rem;
}
.archive-item .actions .restore {
background: #2ecc71;
color: white;
}
.archive-item .actions .delete-permanent {
background: #e74c3c;
color: white;
}
	.przelacznik {
  position: fixed;
  top: 10px;
  left: 10px;
  background: #222;
  padding: 10px 15px;
  border-radius: 8px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
}

.przelacznik a {
  color: white;
  text-decoration: none;
  margin-bottom: 8px;
  font-family: Arial, sans-serif;
  background: #333;
  padding: 6px 10px;
  border-radius: 5px;
  transition: background 0.2s;
}

.przelacznik a:hover {
  background: #555;
}
</style>
</head>
<body>
		<div class="przelacznik">
  <a href="https://fillxd.github.io/sz57">Syst</a>
  <a href="https://fillxd.github.io/pl57">Plan</a>
  <a href="https://fillxd.github.io/kl57">5b</a>
  <a href="https://fillxd.github.io/na57">MG</a>
  <a href="https://docs.google.com/spreadsheets/d/18OV9Sar_ENFseGPn8wppwrIeJXm6j4dsa890OTg6Ioo/edit?gid=1854724628#gid=1854724628">ARK</a>
</div>
 <!-- Modal logowania - PIERWSZA RZECZ NA STRONIE -->
																													<!-- INFORMACJA O WERSJI STRONY --!>
<div style="position:fixed; top:0; left:0; padding:5px; background:white; z-index:9999;">2.0a</div>
<div class="header">
<h1>Szkoła Podstawowa nr 57 we Wrocławiu</h1> 

																													<!-- TYTUŁ NA GÓRZE W MENU GŁÓWNYM --!>

<div class="search-container">
<a href="#" id="archiveButton">Kosz</a>
</div>
</div>
																														<!-- NAZWY KATEGORII NA STRONIE --!>
<nav>
<div class="menu">
<a href="#" class="active" data-category="1">Strona Główna</a>`
<a href="#" data-category="5">Aktualności</a>
<a href="#" data-category="11">Dokumenty</a>
<a href="#" data-category="2">Wydarzenia</a>
<a href="#" data-category="9">Nauczyciele</a>
<a href="#" data-category="10">Wychowawcy</a>
<a href="#" data-category="7">Klasy 1-3 i Świetlica</a>
<a href="#" data-category="6">Samorząd Uczniowski i Wolontariat</a>
<a href="#" data-category="12">Szkoła Artystyczna</a>
<a href="#" data-category="8">Dla Nauczycieli</a>
<a href="#" data-category="3">Ogłoszenia</a>
<a href="#" data-category="4">Nieobecności</a>
</div>
</nav>	

<div class="container">
<button class="add-button" id="addButton" onclick="handleAddButton()">Dodaj Ogłoszenie</button>
<div id="announcements"></div>
</div>

<!-- Modal dla nieobecności -->
<div class="modal-overlay" id="absenceModal">
<div class="modal-content">
<form id="absenceForm">
<div class="form-group">
<label>Okres nieobecności:</label>
<div class="date-range-container">
<div class="date-range-item">
<label for="absenceDateFrom">Od:</label>
<input type="date" id="absenceDateFrom" required>
</div>
<div class="date-range-item">
<label for="absenceDateTo">Do:</label>
<input type="date" id="absenceDateTo" required>
</div>
</div>
</div>

<div class="form-group">
<label for="absenceHours">Godziny (lub "cały dzień"):</label>
<input type="text" id="absenceHours" placeholder="np. 8:00-12:00 lub cały dzień" required>
</div>

<div class="form-group">
<label for="absenceTeacher">Nauczyciel:</label>
<select id="absenceTeacher" required>
<option value="">Wybierz nauczyciela</option>
</select>
</div>

																									<!-- POWODY NIEOBECNOŚCI DLA NAUCZYCIELI --!>
<div class="form-group">
<label for="absenceReason">Powód:</label>
<select id="absenceReason" required>
<option value="">brak</option>
<option value="Zwolnienie Lekarskie">Zwolnienie Lekarskie</option>
<option value="Choroba">Choroba</option>
<option value="Długotrwała Choroba">Długotrwała Choroba</option>
<option value="Sprawy szkolne">Sprawy szkolne</option>
<option value="Sprawy prywatne">Sprawy prywatne</option>
<option value="Urlop Płatny">Urlop Płatny</option>
<option value="Urlop Bezpłatny">Urlop Bezpłatny</option>
<option value="Urlop Rodzinny">Urlop Rodzinny</option>
<option value="Szkolenie">Szkolenie</option>
<option value="Rada/Konsultacje">Rada/Konsultacje</option>
<option value="Odpracowanie">Odpracowanie</option>
<option value="Wycieczka">Wycieczka</option>
<option value="Inne">Inne</option>
</select>
</div>

<div class="form-buttons">
<button type="button" onclick="document.getElementById('absenceModal').style.display = 'none'">Anuluj</button>
<button type="submit">Zapisz</button>
</div>
</form>
</div>
</div>

<!-- Modal dla wydarzeń -->
<div class="modal-overlay" id="eventModal">
<div class="modal-content">
<form id="eventForm">
<div class="form-group">
<label for="eventDate">Data:</label>
<input type="date" id="eventDate" required>
</div>

<div class="form-group">
<label for="eventHours">Godziny (lub "cały dzień"):</label>
<input type="text" id="eventHours" placeholder="np. 8:00-12:00 lub cały dzień" required>
</div>

<div class="form-group">
<label for="eventName">Nazwa wydarzenia:</label>
<input type="text" id="eventName" required>
</div>

<div class="form-group">
<label for="eventCategory">Działanie:</label>
<select id="eventCategory" required>
<option value="">wybierz</option>
<option value="zajęcia odwołane - uczniowie zwolnieni do domu.">zajęcia odwołane - uczniowie zwolnieni do domu.</option>
<option value="Zajęcia związane z tematem wydarzenia.">zajęcia związane z tematem wydarzenia.</option>
<option value="Dzień wolny od zajęć dydaktyczno-wychowawczych (Dzień Wolny Szkoły)">Dzień wolny od zajęć dydaktyczno-wychowawczych (Dzień Wolny Szkoły)</option>
<option value="brak">Brak</option>
</select>
</div>

<div class="form-buttons">
<button type="button" onclick="document.getElementById('eventModal').style.display = 'none'">Anuluj</button>
<button type="submit">Zapisz</button>
</div>
</form>
</div>
</div>

<!-- Modal dla ogłoszeń -->
<div class="modal-overlay" id="announcementModal">
<div class="modal-content">
<form id="announcementForm">
<div class="form-group">
<label for="announcementTeacher">Nauczyciel:</label>
<select id="announcementTeacher" required>
<option value="">Wybierz nauczyciela</option>
</select>
</div>

<div class="form-group">
<label for="announcementTitle">Tytuł:</label>
<input type="text" id="announcementTitle" required>
</div>

<div class="form-group">
<label for="announcementContent">Treść:</label>
<textarea id="announcementContent" rows="4" required></textarea>
</div>

<div class="form-group">
<label>Czas:</label>
<div class="date-range-container">
<div class="date-range-item">
<label for="announcementDateFrom">Od:</label>
<input type="date" id="announcementDateFrom" required>
</div>
<div class="date-range-item">
<label for="announcementDateTo">Do:</label>
<input type="date" id="announcementDateTo" required>
</div>
</div>
</div>

<div class="form-buttons">
<button type="button" onclick="document.getElementById('announcementModal').style.display = 'none'">Anuluj</button>
<button type="submit">Zapisz</button>
</div>
</form>
</div>
</div>

<!-- Modal dla aktualności -->
<div class="modal-overlay" id="newsModal">
<div class="modal-content">
<form id="newsForm">
<div class="form-group">
<label for="newsTitle">Tytuł wpisu:</label>
<input type="text" id="newsTitle" required>
</div>

<div class="form-group">
<label for="newsContent">Treść wpisu:</label>
<textarea id="newsContent" rows="4" required></textarea>
</div>

<div class="form-buttons">
<button type="button" onclick="document.getElementById('newsModal').style.display = 'none'">Anuluj</button>
<button type="submit">Zapisz</button>
</div>
</form>
</div>
</div>

<!-- Modal dla archiwum -->
<div class="modal-overlay" id="archiveModal">
<div class="modal-content archive-modal">
<h2>Archiwum</h2>
<div id="archiveContent"></div>
<div class="form-buttons">
<button type="button" onclick="document.getElementById('archiveModal').style.display = 'none'">Zamknij</button>
</div>
</div>
</div>

<script>

// Sprawdź przy ładowaniu strony
window.addEventListener("DOMContentLoaded", () => {
  if (localStorage.getItem("isLoggedIn") === "true") {
    document.getElementById("loginOverlay").style.display = "none";
    document.getElementById("content").style.display = "block";
  }
});
// KONFIGURACJA FIREBASE
const firebaseConfig = {
apiKey: "AIzaSyCFOF0WtZfOSzXFO6gr6kTXwtHlymwGjNU",
authDomain: "szkola57-ccc80.firebaseapp.com",
databaseURL: "https://szkola57-ccc80-default-rtdb.europe-west1.firebasedatabase.app",
projectId: "szkola57-ccc80",
storageBucket: "szkola57-ccc80.appspot.com",
messagingSenderId: "422165475378",
appId: "1:422165475378:web:dc7cd50c37451dd7ec4c2b"
};

// Inicjalizacja Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();

let currentCategory = 1;
let announcements = {};
let archive = [];
let currentPage = 1;
const itemsPerPage = 8;

const requiredCategories = [2, 3, 4, 5, 6, 7, 8, 12];

function saveAnnouncements() {
// Zapisz zarówno ogłoszenia jak i archiwum w jednej transakcji
const updates = {
'/announcements': announcements,
'/archive': archive
};
return database.ref().update(updates);
}

function loadAnnouncements(callback) {
// Ładuj obie kolekcje równocześnie
const announcementsPromise = new Promise(resolve => {
database.ref('announcements').on('value', snapshot => {
const data = snapshot.val() || {};
// Upewnij się, że wszystkie wymagane kategorie istnieją
requiredCategories.forEach(cat => {
if (!data[cat]) data[cat] = [];
});
announcements = data;
resolve();
});
});

const archivePromise = new Promise(resolve => {
database.ref('archive').on('value', snapshot => {
archive = snapshot.val() || [];
resolve();
});
});

Promise.all([announcementsPromise, archivePromise])
.then(callback)
.catch(error => {
console.error("Błąd ładowania danych:", error);
// Ustaw domyślne wartości w przypadku błędu
announcements = {};
requiredCategories.forEach(cat => {
announcements[cat] = [];
});
archive = [];
callback();
});
}
																																	/* LISTA NAUCZYCIELI */
const nauczyciele = [
"Aleksander Białko", "Katarzyna Borzędzin", "Anna Brzeska", "Hanna Brzeska", "Anna Burakowska", "Agnieszka Burkiewicz", "Katarzyna Buzdro", "Sylwia Cześniewicz", "Faustyna Dobrzek",
"Małgorzata Domagała", "Karolina Dominiak", "Dariusz Drzemała", "Elżbieta Gawin", "Mateusz Gig", "Irynna Goshevniyk", "Grażyna Gruszka", "Paweł Grzegorzewski", "Anna Grześkowiak",
"Ignacy Jasiński", "Magdalena Joelesh", "Martyna Kołodziejczyk", "Zuzanna Kośnicka", "Sylwia Kozakowska", "Marcin Krupnicki", "Małgorzata Lesińska", "Rozalia Lipska", "Zofia Lisek",
"Aleksandra Malczyk", "Ewa Malinowska", "Joanna Małek", "Dorota Maszkiewska", "Agnieszka Miłasz", "Kinga Młodzik", "Karolina Młotek", "Daria Musherina", "Antonnio Myszkowski", "Tadeusz Ostrowski",
"Ludwik Parkowiak", "Antonina Pawelczyk", "Michał Pietruszewski", "Natalia Raczyńska", "Alicja Rajewicz-Drzemała", "Weronika Rogalska", "Katarzyna Sieczko", "Renata Skleszewska",
"Lena Skwierzyńska", "Alicja Struś-Michalska", "Barbara Strzegomska", "Karolina Sznurowska", "Bożena Szpilkiewicz", "Ewelina Śmigalska", "Zuzanna Świerczek", "Michał Tarczyn", 
" Barbara Trzaskowska", "WAKAT Fizyka", "Celina Włodarczyk", "Ignacy Włoszek", "Marian Woźniak", "Aleksandra Wykaz", "Marlena Wyszyńska", "Urszula Złocińska", "Oliwia Żabkiewicz", "Karolina Żukowska",
  "teacher_account_150", "teacher_account_153", "wychowawca świetlicy", "teacher_account_154", "Administrator"
];

// Inicjalizacja list nauczycieli
[document.getElementById('absenceTeacher'), document.getElementById('announcementTeacher')].forEach(select => {
nauczyciele.forEach(teacher => {
const option = document.createElement('option');
option.value = teacher;
option.textContent = teacher;
select.appendChild(option);
});
});

document.querySelectorAll('.menu a').forEach(link => {
link.addEventListener('click', (e) => {
e.preventDefault();
currentCategory = parseInt(link.dataset.category);
currentPage = 1;
document.querySelector('.menu a.active').classList.remove('active');
link.classList.add('active');
toggleAddButton();
showAnnouncements();
});
});

// Obsługa przycisku archiwum
document.getElementById('archiveButton').addEventListener('click', (e) => {
e.preventDefault();
showArchive();
});

function showArchive() {
const archiveContent = document.getElementById('archiveContent');
archiveContent.innerHTML = '';

if (archive.length === 0) {
archiveContent.innerHTML = '<p>Archiwum jest puste.</p>';
} else {
archive.forEach((item, index) => {
const archiveItem = document.createElement('div');
archiveItem.className = 'archive-item';

const formatDate = (dateStr) => {
if (!dateStr) return '';
const [year, month, day] = dateStr.split('-');
return `${day.padStart(2, '0')}.${month.padStart(2, '0')}.${year}`;
};

let content = '';
if (item.category === 4) {
// Nieobecność
const from = formatDate(item.dateFrom);
const to = formatDate(item.dateTo);
content = `
                           <h3>Nieobecność: ${item.teacher}</h3>
                           <p>Okres: ${from} - ${to} ${item.hours ? `(${item.hours})` : ''}</p>
                           <p>Powód: ${item.reason}</p>
                       `;
} else if (item.category === 2) {
// Wydarzenie
content = `
                           <h3>Wydarzenie: ${item.name}</h3>
                           <p>Data: ${formatDate(item.date)} ${item.hours ? `(${item.hours})` : ''}</p>
                           <p>Kategoria: ${item.category}</p>
                       `;
} else if (item.category === 3) {
// Ogłoszenie
const from = formatDate(item.dateFrom);
const to = formatDate(item.dateTo);
content = `
                           <h3>Ogłoszenie: ${item.teacher} - ${item.title}</h3>
                           <p>Okres ważności: ${from} - ${to}</p>
                           <p>${item.content}</p>
                       `;
} else if (item.category === 5) {
// Aktualność
content = `
                           <h3>Aktualność: ${item.title}</h3>
                           <p>${item.content}</p>
                       `;
} else {
// Inne
content = `
                           <h3>${item.title || 'Brak tytułu'}</h3>
                           <p>${item.content || 'Brak treści'}</p>
                       `;
}

const deletedDate = new Date(item.deletedAt || Date.now());
content += `
                       <p><small>Usunięte: ${deletedDate.toLocaleString()}</small></p>
                       <p><small>Kategoria: ${getCategoryName(item.category)}</small></p>
                       <div class="actions">
                           <button class="restore" onclick="restoreFromArchive(${index})">Przywróć</button>
                           <button class="delete-permanent" onclick="deleteFromArchive(${index})">Usuń na zawsze</button>
                       </div>
                   `;

archiveItem.innerHTML = content;
archiveContent.appendChild(archiveItem);
});
}

document.getElementById('archiveModal').style.display = 'flex';
}

function restoreFromArchive(index) {
const item = archive[index];
if (confirm(`Czy na pewno chcesz przywrócić to ogłoszenie do kategorii ${getCategoryName(item.category)}?`)) {
// Dodaj do odpowiedniej kategorii
announcements[item.category].unshift(item);
// Usuń z archiwum
archive.splice(index, 1);
// Zapisz zmiany
saveAnnouncements().then(() => {
showArchive();
showAnnouncements();
});
}
}

function deleteFromArchive(index) {
if (confirm('Czy na pewno chcesz trwale usunąć to ogłoszenie z archiwum?')) {
archive.splice(index, 1);
saveAnnouncements().then(() => {
showArchive();
});
}
}

function getCategoryName(categoryId) {
const categories = {
1: 'Strona Główna',
2: 'Wydarzenia',
3: 'Ogłoszenia',
4: 'Nieobecności',
5: 'Aktualności',
6: 'Samorząd Uczniowski i Wolontariat',
7: 'Klasy 1-3 i Świetlica',
8: 'Dla Nauczycieli',
9: 'Grono Pedagogiczne',
10: 'Wychowawcy',
11: 'Dokumenty' ,
12: 'Szkoła Artystyczna'
};
return categories[categoryId] || 'Nieznana kategoria';
}

function showAnnouncements() {
const container = document.getElementById('announcements');
container.innerHTML = '';

																															<!-- STRONA GŁÓWNA - INFORMACJE DO EDYCJI --!>

if(currentCategory === 1) {
container.innerHTML = `
                   <div class="homepage-content">
                       <h1>Witamy na stronie Szkoły Podstawowej nr 57 i Szkoły Artystycznej nr 2 we Wrocławiu!</h1>
                       <h2>NOWA SZKOŁA ARTYSTYCZNA NR 2 WE WROCŁAWIU W NASZYM BUDYNKU!</h2>
                       Zapraszamy do naszej krainy edukacji! <br>
                    </p>
                       
                       <h3>O Naszej Szkole Podstawowej</h3>
                       <p>Nasza szkoła to nowoczesna, przyjazna i otwarta placówka edukacyjna, która oferuje szeroki wachlarz możliwości rozwoju dla każdego ucznia. Prowadzimy 
klasy ogólne, sportowe, muzyczne oraz językowe – tak, aby każde dziecko mogło rozwijać swoje pasje, zdolności i zainteresowania w odpowiednim dla siebie kierunku. Dysponujemy 
wykwalifikowaną i doświadczoną kadrą pedagogiczną, która z zaangażowaniem wspiera uczniów w codziennej nauce i wychowaniu. Naszym priorytetem jest tworzenie bezpiecznego, 
inspirującego środowiska, w którym dzieci mogą uczyć się, rozwijać i budować trwałe relacje. Nad całością czuwa kompetentna i oddana dyrekcja, dbająca zarówno o wysoki poziom
 kształcenia, jak i o dobrą atmosferę w szkole. Dzięki wspólnej pracy całej społeczności szkolnej, nasza szkoła to miejsce, które nie tylko kształci, ale również wychowuje i 
 wspiera młodych ludzi na każdym etapie ich rozwoju.</p>
                       <h3>O Patronie Szkoły Podstawowej</h3>
			<p>Stanisław Moniuszko urodził się 5 maja 1819 roku w Ubielu (dzisiejsza Białoruś). Był jednym z najwybitniejszych polskich kompozytorów XIX wieku, często nazywany 
"ojcem polskiej opery narodowej". Od najmłodszych lat miał kontakt z muzyką – pierwsze lekcje gry na fortepianie otrzymał od matki. W wieku 18 lat wyjechał do Berlina, gdzie 
studiował kompozycję i teorię muzyki u Carla Rungenhagena. Po powrocie do kraju objął posadę organisty w Wilnie i rozpoczął działalność kompozytorską oraz organizował koncerty. 
W tym czasie tworzył pieśni, muzykę kościelną, a także utwory sceniczne. Jego największą sławę przyniosła opera „Halka”, która miała premierę w 1848 roku w Wilnie w wersji 
koncertowej, a pełne wykonanie sceniczne odbyło się w 1858 roku w Warszawie. Moniuszko doskonale oddał w niej ducha polskiego społeczeństwa – pokazał problemy chłopów i szlachty, 
wykorzystując elementy muzyki ludowej. W 1858 roku został dyrektorem Teatru Wielkiego w Warszawie, gdzie napisał kolejne ważne opery, m.in. „Straszny dwór”, „Hrabina” i „Paria”.
 Oprócz oper tworzył też liczne pieśni, zebrane w zbiorach takich jak „Śpiewnik domowy”, który do dziś stanowi skarb polskiej kultury muzycznej. Moniuszko zmarł nagle 4 czerwca 
 1872 roku w Warszawie. Został pochowany na Cmentarzu Powązkowskim. Jego twórczość, mocno zakorzeniona w polskim folklorze i tradycji narodowej, do dziś jest symbolem muzycznego 
patriotyzmu.</p>
			<h3> O Naszej Szkole Artystycznej </h3>
			<p> Nasza szkoła popołudniowa to idealne miejsce dla uczniów, którzy chcą rozwijać swoje pasje artystyczne po lekcjach. Oferujemy zajęcia z muzyki, teatru, plastyki 
			i tańca, prowadzone przez pełnych energii i kreatywności nauczycieli. Zajęcia są otwarte dla wszystkich – niezależnie od szkoły, do której uczęszczasz na co dzień. 
			Wystarczy chęć tworzenia, odrobina pasji i zapis, a resztą zajmiemy się my! To nie tylko nauka, ale też świetna atmosfera, występy, warsztaty i możliwość pokazania 
			swoich talentów szerszej publiczności. </p>

                       <h3>Godziny otwarcia:</h3>
					   <p> Szkoła: PN-PT 6:30-18:30 </p>
						<p> Sekretariat: PN-PT 7:30-15:30 </p>
						<p> Biblioteka (Karolina Młotek): PN(9:50-13:35) WT(8:00-13:35) CZ(12:30-14:30) PT(12:50-15:30)
						<p> Psycholog mgr. Aleksandra Wykaz: PN-PT (9:00-14:30)
	  					<p> Pedagog mgr. Anna Grześkowiak: WT:8:00-11:30, ŚR:8:00-10:30 i 13:00-15:30, CZ: 9:00-14:30, PT: 8:00-15:30
                   </div>`;
return;
}

if(currentCategory === 12) {
container.innerHTML = `

																															<!-- INFORMACJE O SZKOLE ARTYSTYCZNEJ DO EDYCJI --!>

                   <div class="homepage-content">
                       <h1 style="text-align: center;">Szkoła Artystyczna nr 2 we Wrocławiu</h1>
                       <p>Informacje na temat szkoły artystycznej.<br>
                       <p>Nasza szkoła popołudniowa to idealne miejsce dla uczniów, którzy chcą rozwijać swoje pasje artystyczne po lekcjach. Oferujemy zajęcia z tańca, plastyki, teatru i fotografii, prowadzone przez pełnych energii i kreatywności nauczycieli. Zajęcia są otwarte dla wszystkich – niezależnie od szkoły, do której uczęszczasz na co dzień. 
			Wystarczy chęć tworzenia, odrobina pasji i zapis, a resztą zajmiemy się my! To nie tylko nauka, ale też świetna atmosfera, występy, warsztaty i możliwość pokazania 
			swoich talentów szerszej publiczności.</p>


                       <h1 style="text-align: center;">KLASY</h1>
		       <h3>TANECZNA - TA1 (14 os.) 7-10 lat </h3>
	 		<h3>TANECZNA - TA2 (13 os.) 11-14 lat </h3>
    <h3>PLASTYCZNA - P (20 os.) 7-14 lat </h3>
    <h3>TEATRALNA - TE (14 os.) 7-14 lat </h3>
    <h3>FOTOGRAFICZNA - F (10 os.) 11-14 lat </h3>
			<h1 style="text-align: center;"> Nauczyciele </h1>
			<h3> Ewa Malinowska (dyrektor) </h3>
			<h3> Karolina Sznurowska </h3>
			<h3> Agnieszka Burkiewicz </h3>	
<a href="PLANSA.pdf" target="_blank">📅 PLAN LEKCJI SZKOŁY ARTYSTYCZNEJ</a>
                   </div>`;
const artContainer = document.getElementById('school-art-announcements') || container;
    const categoryAnnouncements = announcements[currentCategory] || [];

    if(categoryAnnouncements.length === 0) {
        artContainer.innerHTML = '<p>Brak ogłoszeń.</p>';
    } else {
        categoryAnnouncements.forEach((ann, index) => {
            artContainer.appendChild(createAnnouncementCard(ann, index));
        });
    }
    return;
}

if(currentCategory === 11) {
container.innerHTML = `

																															<!-- DOKUMENTY DO DODANIA I INFORMACJE --!>

                   <div class="homepage-content">
                       <h1>DOKUMENTY:</h1>
	<img src="" alt="" style="width: 600px;">
<a href="kalendarz.pdf" target="_blank">📅 KALENDARZ ROKU SZKOLNEGO 2025/2026</a>
<h3></h3>
<a href="SP57_ZajDod.pdf" target="_blank">📅KALENDARZ ZAJĘĆ DODATKOWYCH W ROKU SZKOLNYM (NOWY!)</a>
<h3></h3>
<a href="SP57_Kon.pdf" target="_blank">👨‍💼TERMINY KONSULTACJI Z NAUCZYCIELAMI 2025/2026 (NOWE!)</a>
<h2>PLANY LEKCJI</h2>
<a href="PLANES.pdf" target="_blank"> stary PLAN SP57// ważny do 26.09.2025r.</a>
<h3></h3>
<a href="Sale-57.pdf" target="_blank"> PODZIAŁ SAL NA NAUCZYCIELI, KLASY I PRZEDMIOTY </a>
<h2>PLANY LEKCJI</h2>
<a href="SP57_P2.pdf" target="_blank"> NOWY PLAN LEKCJI DLA KLAS - SP 57 (ważny od 29.09) </a>
<h3></h3>
<a href="SP57_P2N.pdf" target="_blank"> NOWY PLAN LEKCJI DLA NAUCZYCIELI - SP 57 (wazny od 29.09) </a>
<h3></h3>
<a href="PLANSA.pdf" target="_blank">📅 PLAN LEKCJI SZKOŁY ARTYSTYCZNEJ 2025r.</a>
<h3></h3>



                       <div class="tekst">
		       
                       </div> </div>
					   
																																<!-- PLAN LEKCJI SZKOŁY DO EDYCJI --!>
						
`;
return;
}
if(currentCategory === 6) {
container.innerHTML = `

																											<!-- INFORMACJE O SAMORZADZIE I WOLONTARIACIE DO EDYCJI --!>

                    <div class="homepage-content">
                       <h2>Samorząd Uczniowski i Szkolne Koło Wolontariatu</h2>
                       <h4>• Opiekun Samorządu Ucz. kl.1-3:    Anna Brzeska</h4>
                       <h4>• Opiekun Samorządu Ucz. kl.4-8:    Michał Tarczyn</h4>
					   <h4>• Opiekun Szkolnego Koła Wolontariatu:      Michał Tarczyn, Zofia Lisek </h4>
					   <h4>• Przewodniczący Szkoły:   </h4>
					   <h4>• Przewodniczący klas 1-3:   </h4>
					   <h4>• Przewodniczący klas 4-8:   </h4>
					   <h4>• Przewodnicząca Szkoły: Pola Rucińska (7m)  </h4>
					   <h4>• Przewodnicząca klas 1-3: Zuzanna Kamińska (3a)  </h4>
					   <h4>• Przewodniczący klas 4-8: Szymon Zaucha (6b)  </h4>
                       <h3>GODZINA DOSTĘPNOŚCI OPIEKUNÓW SAMORZĄDU I KOŁA WOLONTARIATU: piątek 10:45-12:50</h3>
						<h3>GODZINA ZEBRANIA UCZESTNIKÓW SAMORZĄDU UCZNIOWSKIEGO: piątek 11:30-11:45 (przerwa) </h3>
						<h3>GODZINA ZEBRANIA UCZESTNIKÓW SZKOLNEGO KOŁA WOLONTARIATU: piątek 12:30-12:50 (przerwa) </h3>
                       <img src=".png" alt="" width="500">
						 <h2>Ogłoszenia Samorządu i Wolontariatu:</h2>
       </div>`;

    const categoryAnnouncements = announcements[currentCategory] || [];
    categoryAnnouncements.forEach((ann, index) => {
        container.appendChild(createAnnouncementCard(ann, index));
    });
    return;
}

if(currentCategory === 9) {
container.innerHTML = `
<h2 style="text-align: center;">
  GRONO PEDAGOGICZNE NA ROK SZKOLNY 2025/2026.
</h2>

                   <table class="teachers-table">
				   
																										<!-- LISTA NAUCZYCIELI I ICH PRZEDMIOTÓW - DO UZUPEŁNIENIA --!>
				   
                       <thead>
                           <tr>
                               <th>Przedmiot</th>
                               <th>Nauczyciel</th>
                           </tr>
                       </thead>
                       <tbody>
                           <tr><td>Język Polski</td><td>Małgorzata Lesińska, Anna Burakowska, Oliwia Żabkiewicz, Elżbieta Gawin, Dorota Maszkiewska</td></tr>
                           <tr><td>Matematyka</td><td>Michał Tarczyn, Renata Skleszewska, Joanna Małek, Bożena Szpilkiewicz, Grażyna Gruszka</td></tr>
                           <tr><td>Język Angielski</td><td>Karolina Dominiak, Zofia Lisek, Marlena Wyszyńska, Katarzyna Sieczko, Celina Włodarczyk</td></tr>
                           <tr><td>Język Niemiecki</td><td>Magdalena Joelesh</td></tr>
						   <tr><td>Język Hiszpański</td><td>Antonnio Myszkowski</td></tr>
                           <tr><td>Wychowanie Fizyczne</td><td>Natalia Raczyńska, Sylwia Cześniewicz, Małgorzata Domagała, Marcin Krupnicki, Michał Pietruszewski,Kinga Młodzik</td></tr>
                           <tr><td>Historia</td><td>Paweł Grzegorzewski, Karolina Żukowska</td></tr>
                           <tr><td>Biologia, Przyroda</td><td>Zuzanna Świerczek</td></tr>
                           <tr><td>Doradztwo Zawodowe</td><td>Martyna Kołodziejczyk</td></tr>
                           <tr><td>Plastyka</td><td>Barbara Trzaskowska</td></tr>
                           <tr><td>Technika</td><td>Ludwik Parkowiak</td></tr>
                           <tr><td>Chemia</td><td>Tadeusz Ostrowski</td></tr>
                           <tr><td>Fizyka</td><td>Marian Woźniak</td></tr>
                           <tr><td>Wiedza o społeczeństwie</td><td>Ludwik Parkowiak</td></tr>
                           <tr><td>Edukacja dla bezpieczeństwa</td><td>Dariusz Drzemała</td></tr>
                           <tr><td>Geografia</td><td>Mateusz Gig</td></tr>
                           <tr><td>Informatyka</td><td>Ewelina Śmigalska, Mateusz Gig</td></tr>
							 <tr><td>Religia</td><td>Ignacy Włoszek</td></tr>
                           <tr><td>Muzyka</td><td>Hanna Brzeska</td></tr>
							<tr><td>Teatr</td><td>Antonina Pawelczyk</td></tr>
	   						<tr><td>Taniec</td><td>Hanna Brzeska</td></tr>
                           <tr><td>Kształcenie Słuchu</td><td>Antonina Pawelczyk</td></tr>
							<tr><td>Nauka o Muzyce </td><td>Antonina Pawelczyk</td></tr>
                           <tr><td>Edukacja Wczesnoszkolna</td><td>Weronika Rogalska, Martyna Kołodziejczyk, Rozalia Lipska, Faustyna Dobrzek, Katarzyna Buzdro, Anna Brzeska, Alicja Rajewicz-Drzemała, Agnieszka Miłasz, Daria Musherina</td></tr>
                           <tr><td>Basen</td><td>Marcin Krupnicki</td></tr>
							<tr><td>Edukacja Zdrowotna</td><td>Lena Skwierzyńska</td></tr>
                           <tr><td>Zajęcia Terenowe</td><td>Sylwia Cześniewicz, Małgorzata Domagała, Michał Pietruszewski</td></tr>
                           <tr><td>Świetlica</td><td>Alicja Struś-Michalska, Barbara Strzegomska, Urszula Złocińska, Kinga Młodzik, Małgorzata Lesińska, Alicja Rajewicz-Drzemała, Aleksandra Malczyk, Martyna Kołodziejczyk, Anna Brzeska , Zuzanna Kośnicka, Ignacy Jasinski</td></tr>
                           <tr><td>Etyka</td><td>Elżbieta Gawin</td></tr>
                           <tr><td>Nauczyciel Wspomagający</td><td>Sylwia Kozakowska, Aleksandra Malczyk, Dariusz Drzemała, Irynna Goshevniyk, Zuzanna Kośnicka</td></tr>

                       </tbody>
                   </table>
				   
<h2 style="text-align: center;">
ADMINISTRACJA i SZKOŁA ARTYSTYCZNA
</h2>
	  <table class="teachers-table">
                       <thead>
                           <tr>
                               <th>Zawód</th>
                               <th>Imię i Nazwisko</th>
                           </tr>
                       </thead>
                       <tbody>

                    
			          <tr><td>Pedagog</td><td>Anna Grześkowiak</td></tr>
	            <tr><td>Psycholog</td><td>Aleksandra Wykaz</td></tr>
                           <tr><td>Biblioteka</td><td>Karolina Młotek</td></tr>
                           <tr><td>Dyrekcja</td><td>Lena Skwierzyńska - wicedyrektor klas młodszych, Mateusz Gig - wicyderektor klas starszych, Aleksander Białko - dyrektor SP 57, Ewa Malinowska - dyrektor SA 2</td></tr>
							<tr><td>Taniec</td><td>Agnieszka Burkiewicz</td></tr>
							<tr><td>Gimnastyka</td><td>Ewa Malinowska</td></tr>
							<tr><td>Plastyka i Fotografia </td><td>Karolina Sznurkowska</td></tr>
							<tr><td>Teatr i Warsztat Aktorski </td><td>Agnieszka Burkiewicz</td></tr>
							<tr><td>Obróbka </td><td>Ewa Malinowska</td></tr>	   
                       </tbody>
                   </table>`


return;
}

if(currentCategory === 10) {
container.innerHTML = `
<h2 style="text-align: center;">
LISTA KLAS, WYCHOWAWCÓW I NAUCZYCIELI WSPOMAGAJĄCYCH NA ROK SZKOLNY 2025/2026
</h2>	

																							<!-- LISTA WYCHOWAWCÓW I NAUCZYCIELI WSPOMAGAJĄCYCH - DO UZUPEŁNIENIA --!>

                   <table class="tutors-table">
                       <thead>
                           <tr>
                               <th>Klasa</th>
			       <th>Nazwa klasy</th>
                               <th>Wychowawca</th>
                               <th>Nauczyciel Wspomagający</th>
                           </tr>
                       </thead>
                       <tbody>
                           <tr><td>1A</td><td>Ogólna</td><td>Weronika Rogalska</td><td>Sylwia Kozakowska</td></tr>
			    <tr><td>1B</td><td>Językowa</td><td>Katarzyna Buzdro</td><td></td></tr>
      			  <tr><td>1M</td><td>Muzyczna</td><td>Anna Brzeska</td><td></td></tr>
			 <tr><td>2A</td><td>Ogólna</td><td>Martyna Kołodziejczyk</td><td></td></tr>
 			  <tr><td>2B</td><td>Ogólna</td><td>Rozalia Lipska</td><td></td></tr>
   			 <tr><td>2C</td><td>Ogólna</td><td>Faustyna Dobrzek</td><td></td></tr>
    			 <tr><td>3A</td><td>Ogólna</td><td>Alicja Rajewicz-Drzemała</td><td></td></tr>
   			   <tr><td>3B</td><td>Ogólna</td><td>Agnieszka Miłasz</td><td></td></tr>
    			   <tr><td>3C</td><td>Językowa</td><td>Daria Musherina</td><td>Irynna Goshevniyk</td></tr>
    		 	   <tr><td>4A</td><td>Sportowa</td><td>Marcin Krupnicki</td><td></td></tr>
	  		   <tr><td>4B</td><td>Ogólna</td><td>Małgorzata Lesińska</td><td></td></tr>
    <tr><td>4C</td><td>Ogólna</td><td>Karolina Dominiak</td><td></td></tr>
    <tr><td>5A</td><td>Sportowa</td><td>Renata Skleszewska</td><td></td></tr>
    <tr><td>5B</td><td>Ogólna</td><td>Mateusz Gig</td><td></td></tr>
    <tr><td>5C</td><td>Artystyczna</td><td>Natalia Raczyńska</td><td>Aleksandra Malczyk</td></tr>
    <tr><td>6A</td><td>Ogólna</td><td>Katarzyna Sieczko</td><td></td></tr>
    <tr><td>6B</td><td>Ogólna</td><td>Dorota Maszkiewska</td><td></td></tr>
    <tr><td>6M</td><td>Muzyczna</td><td>Antonina Pawelczyk</td><td></td></tr>
    <tr><td>7A</td><td>Ogólna</td><td>Anna Burakowska</td><td></td></tr>
    <tr><td>7B</td><td>Ogólna</td><td>Kinga Młodzik</td><td></td></tr>
    <tr><td>7M</td><td>Muzyczna</td><td>Małgorzata Domagała</td><td>Dariusz Drzemała</td></tr>
    <tr><td>8A</td><td>Ogólna</td><td>Celina Włodarczyk</td><td>Zuzanna Kośnicka</td></tr>
    <tr><td>8B</td><td>Ogólna</td><td>Magdalena Joelesh</td><td></td></tr>
    <tr><td>8M</td><td>Muzyczna</td><td>Ewelina Śmigalska</td><td></td></tr>
	
			   
			   

                   </table>`;
return;
}

// PAGINACJA TYLKO DLA KATEGORII 5
if(currentCategory === 5) {
const allAnnouncements = announcements[currentCategory] || [];
const startIndex = (currentPage - 1) * itemsPerPage;
const endIndex = startIndex + itemsPerPage;
const pagedAnnouncements = allAnnouncements.slice(startIndex, endIndex);

pagedAnnouncements.forEach((ann, index) => {
container.appendChild(createAnnouncementCard(ann, startIndex + index));
});

const totalPages = Math.ceil(allAnnouncements.length / itemsPerPage);
if(totalPages > 1) {
const pagination = document.createElement('div');
pagination.className = 'pagination';

for(let i = 1; i <= totalPages; i++) {
const pageBtn = document.createElement('button');
pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
pageBtn.textContent = i;
pageBtn.onclick = () => {
currentPage = i;
showAnnouncements();
};
pagination.appendChild(pageBtn);
}
container.appendChild(pagination);
}
} else {
// DLA INNYCH KATEGORII BEZ PAGINACJI
const categoryAnnouncements = announcements[currentCategory] || [];
categoryAnnouncements.forEach((ann, index) => {
container.appendChild(createAnnouncementCard(ann, index));
});
}
}

function createAnnouncementCard(ann, index) {
const div = document.createElement('div');
div.className = 'announcement-card';

const formatDate = (dateStr) => {
if (!dateStr) return '';
const [year, month, day] = dateStr.split('-');
return `${day.padStart(2, '0')}.${month.padStart(2, '0')}`;
};

let dateRange = '';
if(ann.dateFrom && ann.dateTo) {
const from = formatDate(ann.dateFrom);
const to = formatDate(ann.dateTo);
dateRange = from === to ? from : `${from} - ${to}`;
}

div.innerHTML = `
               <div class="actions">
                   <span class="delete" onclick="deleteAnnouncement(${index})">🗑️</span>
                   <span class="edit" onclick="editAnnouncement(${index})">✏️</span>
                   <span class="move" onclick="moveAnnouncement(${index}, 'up')">⬆️</span>
                   <span class="move" onclick="moveAnnouncement(${index}, 'down')">⬇️</span>
               </div>
               ${currentCategory === 4 ? `
                   <h2>${dateRange}${ann.hours && ann.hours !== 'cały dzień' ? ` (${ann.hours})` : ''}</h2>
                   <p><strong>${ann.teacher || 'Brak danych'}</strong></p>
                   <p>${ann.reason || 'Brak powodu'}</p>
               ` : currentCategory === 2 ? `
                   <h2>${formatDate(ann.date)}${ann.hours && ann.hours !== 'cały dzień' ? ` (${ann.hours})` : ''}</h2>
                   <p><strong>${ann.name || 'Brak nazwy'}</strong></p>
                   <p>Kategoria: ${ann.category || 'Brak kategorii'}</p>
               ` : currentCategory === 3 ? `
                   <h2>${ann.teacher || 'Brak nauczyciela'}: ${ann.title || 'Brak tytułu'} (${dateRange})</h2>
                   <div class="announcement-content">${ann.content || 'Brak treści'}</div>
                   <span class="time">${timeAgo(ann.timestamp)}</span>
        ` : [5,6,7,8,12].includes(currentCategory) ? `
            <h2>${ann.title || 'Brak tytułu'}</h2>
            <div class="announcement-content">${ann.content || 'Brak treści'}</div>
            <span class="time">${timeAgo(ann.timestamp)}</span>
        ` : `
            <h2>${ann.title || 'Brak tytułu'}</h2>
            <div class="announcement-content">${ann.content || 'Brak treści'}</div>
            <span class="time">${timeAgo(ann.timestamp)}</span>
        `}
    `;
    return div;
}

function deleteAnnouncement(index) {
if(confirm('Czy na pewno chcesz przenieść ten wpis do archiwum?')) {
const deletedItem = announcements[currentCategory][index];
// Dodaj informacje o kategorii i czasie usunięcia
deletedItem.category = currentCategory;
deletedItem.deletedAt = Date.now();

// Dodaj do archiwum
archive.unshift(deletedItem);
// Usuń z aktualnej kategorii
announcements[currentCategory].splice(index, 1);

// Zapisz zmiany
saveAnnouncements()
.then(() => {
showAnnouncements();
})
.catch(error => {
console.error("Błąd podczas zapisywania:", error);
alert("Wystąpił błąd podczas przenoszenia do archiwum.");
});
}
}

function editAnnouncement(index) {
if (currentCategory === 4) {
const absence = announcements[currentCategory][index];
const newDateFrom = prompt('Edytuj datę początkową (RRRR-MM-DD):', absence.dateFrom);
if (!newDateFrom) return;

const newDateTo = prompt('Edytuj datę końcową (RRRR-MM-DD):', absence.dateTo);
if (!newDateTo) return;

const newHours = prompt('Edytuj godziny:', absence.hours || 'cały dzień');
if (!newHours) return;

const newTeacher = prompt('Edytuj nauczyciela:', absence.teacher);
if (!newTeacher) return;

const newReason = prompt('Edytuj powód:', absence.reason);
if (!newReason) return;

absence.dateFrom = newDateFrom;
absence.dateTo = newDateTo;
absence.hours = newHours === 'cały dzień' ? null : newHours;
absence.teacher = newTeacher;
absence.reason = newReason;
} else if (currentCategory === 2) {
const event = announcements[currentCategory][index];
const newDate = prompt('Edytuj datę:', event.date);
if (!newDate) return;

const newHours = prompt('Edytuj godziny:', event.hours || 'cały dzień');
if (!newHours) return;

const newName = prompt('Edytuj nazwę wydarzenia:', event.name);
if (!newName) return;

const newCategory = prompt('Edytuj kategorię:', event.category);
if (!newCategory) return;

event.date = newDate;
event.hours = newHours === 'cały dzień' ? null : newHours;
event.name = newName;
event.category = newCategory;
} else if (currentCategory === 3) {
const announcement = announcements[currentCategory][index];
const newTeacher = prompt('Edytuj nauczyciela:', announcement.teacher);
if (!newTeacher) return;

const newTitle = prompt('Edytuj tytuł:', announcement.title);
if (!newTitle) return;

const newContent = prompt('Edytuj treść:', announcement.content);
if (!newContent) return;

const newDateFrom = prompt('Edytuj datę początkową (RRRR-MM-DD):', announcement.dateFrom);
if (!newDateFrom) return;

const newDateTo = prompt('Edytuj datę końcową (RRRR-MM-DD):', announcement.dateTo);
if (!newDateTo) return;

announcement.teacher = newTeacher;
announcement.title = newTitle;
announcement.content = newContent;
announcement.dateFrom = newDateFrom;
announcement.dateTo = newDateTo;
 } else if ([5,6,7,8,12].includes(currentCategory)) {
        const item = announcements[currentCategory][index];
        const newTitle = prompt('Edytuj tytuł:', item.title);
        if (!newTitle) return;

        const newContent = prompt('Edytuj treść:', item.content);
        if (!newContent) return;

        item.title = newTitle;
        item.content = newContent;

        saveAnnouncements()
        .then(() => showAnnouncements())
        .catch(error => {
            console.error("Błąd podczas zapisywania:", error);
            alert("Wystąpił błąd podczas zapisywania zmian.");
        });
    }
}
function moveAnnouncement(index, direction) {
    if (!announcements[currentCategory]) {
        console.error("Brak ogłoszeń dla tej kategorii");
        return;
    }

    const arr = announcements[currentCategory];

    if (direction === 'up' && index > 0) {
        // Zamiana z poprzednim elementem
        [arr[index], arr[index - 1]] = [arr[index - 1], arr[index]];
    } else if (direction === 'down' && index < arr.length - 1) {
        // Zamiana z następnym elementem
        [arr[index], arr[index + 1]] = [arr[index + 1], arr[index]];
    } else {
        return; // Nie można już przesunąć
    }

    // Zapisz zmiany i odśwież widok
    saveAnnouncements()
        .then(() => showAnnouncements())
        .catch(error => {
            console.error("Błąd zapisu:", error);
            alert("Błąd podczas przesuwania ogłoszenia");
        });
}

function timeAgo(timestamp) {
if (!timestamp) return 'brak daty';
const now = Date.now();
const diff = now - timestamp;

const seconds = Math.floor(diff / 1000);
const minutes = Math.floor(seconds / 60);
const hours = Math.floor(minutes / 60);
const days = Math.floor(hours / 24);

if (days > 0) return `${days} dni temu`;
if (hours > 0) return `${hours} godz. temu`;
if (minutes > 0) return `${minutes} min. temu`;
return `${seconds} sek. temu`;
}

function toggleAddButton() {
    const btn = document.getElementById('addButton');
    btn.style.display = [1, 9, 10, 11].includes(currentCategory) ? 'none' : 'block';
    btn.textContent = currentCategory === 4 ? 'Dodaj Nieobecność' : 
                      currentCategory === 2 ? 'Dodaj Wydarzenie' : 
                      currentCategory === 3 ? 'Dodaj Ogłoszenie' : 
                      currentCategory === 5 ? 'Dodaj Aktualność' :
                      currentCategory === 6 ? 'Dodaj Ogłoszenie SU' :
                      currentCategory === 7 ? 'Dodaj Ogłoszenie' :
                      currentCategory === 8 ? 'Dodaj Ogłoszenie' :
                      currentCategory === 12 ? 'Dodaj Ogłoszenie' :
                      'Dodaj Ogłoszenie';
}

document.addEventListener('DOMContentLoaded', () => {
loadAnnouncements(() => {
showAnnouncements();
toggleAddButton();
});
});

// Obsługa formularzy
document.getElementById('absenceForm').addEventListener('submit', function(e) {
e.preventDefault();

const newAbsence = {
dateFrom: document.getElementById('absenceDateFrom').value,
dateTo: document.getElementById('absenceDateTo').value,
hours: document.getElementById('absenceHours').value,
teacher: document.getElementById('absenceTeacher').value,
reason: document.getElementById('absenceReason').value,
timestamp: Date.now()
};

if (!newAbsence.dateFrom || !newAbsence.dateTo || !newAbsence.hours || !newAbsence.teacher || !newAbsence.reason) {
alert('Proszę wypełnić wszystkie pola!');
return;
}

announcements[currentCategory].unshift(newAbsence);
saveAnnouncements()
.then(() => {
showAnnouncements();
document.getElementById('absenceModal').style.display = 'none';
this.reset();
})
.catch(error => {
console.error("Błąd podczas zapisywania:", error);
alert("Wystąpił błąd podczas dodawania nieobecności.");
});
});

document.getElementById('eventForm').addEventListener('submit', function(e) {
e.preventDefault();

const newEvent = {
date: document.getElementById('eventDate').value,
hours: document.getElementById('eventHours').value,
name: document.getElementById('eventName').value,
category: document.getElementById('eventCategory').value,
timestamp: Date.now()
};

if (!newEvent.date || !newEvent.hours || !newEvent.name || !newEvent.category) {
alert('Proszę wypełnić wszystkie pola!');
return;
}

announcements[currentCategory].unshift(newEvent);
saveAnnouncements()
.then(() => {
showAnnouncements();
document.getElementById('eventModal').style.display = 'none';
this.reset();
})
.catch(error => {
console.error("Błąd podczas zapisywania:", error);
alert("Wystąpił błąd podczas dodawania wydarzenia.");
});
});

document.getElementById('announcementForm').addEventListener('submit', function(e) {
e.preventDefault();

const newAnnouncement = {
teacher: document.getElementById('announcementTeacher').value,
title: document.getElementById('announcementTitle').value,
content: document.getElementById('announcementContent').value,
dateFrom: document.getElementById('announcementDateFrom').value,
dateTo: document.getElementById('announcementDateTo').value,
timestamp: Date.now()
};

if (!newAnnouncement.teacher || !newAnnouncement.title || !newAnnouncement.content || !newAnnouncement.dateFrom || !newAnnouncement.dateTo) {
alert('Proszę wypełnić wszystkie pola!');
return;
}

 announcements[currentCategory].unshift(newAnnouncement);
saveAnnouncements()
.then(() => {
showAnnouncements();
document.getElementById('announcementModal').style.display = 'none';
this.reset();
})
.catch(error => {
console.error("Błąd podczas zapisywania:", error);
alert("Wystąpił błąd podczas dodawania ogłoszenia.");
});
});

document.getElementById('newsForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const newNews = {
        title: document.getElementById('newsTitle').value,
        content: document.getElementById('newsContent').value,
        timestamp: Date.now()
    };

    if (!newNews.title || !newNews.content) {
        alert('Proszę wypełnić wszystkie pola!');
        return;
    }

    // Zmiana: zapis do aktualnej kategorii
    announcements[currentCategory].unshift(newNews);

    saveAnnouncements()
    .then(() => {
        showAnnouncements();
        document.getElementById('newsModal').style.display = 'none';
        this.reset();
    })
    .catch(error => {
        console.error("Błąd podczas zapisywania:", error);
        alert("Wystąpił błąd podczas dodawania.");
    });
});

function handleAddButton() {
    if (currentCategory === 4) {
        addAbsence();
    } else if (currentCategory === 2) {
        addEvent();
    } else if (currentCategory === 3) {
        addAnnouncement();
    } else if (currentCategory === 5 || [6,7,8,12].includes(currentCategory)) {
        addNews();
    }
}
function addAbsence() {
document.getElementById('absenceModal').style.display = 'flex';
}

function addEvent() {
document.getElementById('eventModal').style.display = 'flex';
}

function addAnnouncement() {
document.getElementById('announcementModal').style.display = 'flex';
}

function addNews() {
document.getElementById('newsModal').style.display = 'flex';
}
</script>
</body>
</html>




